<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Common Lisp Unit
      </h1>
      <p>
        For unit tests in Common Lisp you could do worse than start with the RT 
        package available from the CMU AI repository:
      </p>
      <p>
        <a href="http://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/lang/lisp/code/testing/rt/0.html">http://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/lang/lisp/code/testing/rt/0.html</a>
      </p>
      <p>
        The format of a test is very very simple: 
      </p>
      <code>
        (deftest <test-name><br/>
        <form-to-evaluate><br/>
        <expected answer>)<br/>
      </code>
      <p>
        e.g.
      </p>
      <code>
        (deftest simple-sockopt-test<br/>
        ;; test we can set SO_REUSEADDR on a socket and retrieve it, and in<br/>
        ;; the process that all the weird macros in sockopt happened right.<br/>
        (let ((s (make-inet-socket :stream (get-protocol-by-name "tcp"))))<br/>
        (setf (sockopt-reuse-address s) t)<br/>
        (sockopt-reuse-address s))<br/>
        t)<br/>
      </code>
      <p>
        Note that the two results are compared with EQUAL.  I find that almost always
        I end up doing the real comparison in the test form and check it against T as the expected answer 
      </p>
      <p>
        --<a href="DanBarlow.html">DanBarlow</a>
      </p>
      <p>
        Of course, that assumes the comparison operator returns T for true, which isn't guaranteed for many of the builtin comparison operators.  Doing the comparison in that way also obscures the output on failure.  You are told it failed, but not what the actual result was.  --<a href="PaulDietz.html">PaulDietz</a>
      </p>
      <hr/>
      <p>
        [See <a href="TestingFramework.html">TestingFramework</a> for others.]
      </p>
    </div>
  </body>
</html>