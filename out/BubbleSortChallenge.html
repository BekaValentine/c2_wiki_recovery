<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Bubble Sort Challenge
      </h1>
      <p>
        The last time I wrote a <a href="BubbleSort.html">BubbleSort</a> was 1993 for my then-husband. He had written an index of all the dead people in Pembina County, North Dakota, (he's into genealogy) and he needed to sort the pile in alphabetical order. So I sat down in front of my Amstrad PCW and wrote a bubble sort in <a href="BasicLanguage.html">BasicLanguage</a>. Before that, I'm sure I must have written a bubble sort in <a href="FortranLanguage.html">FortranLanguage</a> in 1978. I posted my <a href="PythonLanguage.html">PythonLanguage</a> code on the <a href="BubbleSort.html">BubbleSort</a> page. It felt so strange to write it in Python, I think because in Python I'm accustomed to iterating without being aware of the index of the current list element, or even the length of the list. Writing the bubble sort, I had to force myself to think about counters and indices. And then it took me a day to notice I had a couple <a href="FencePostError.html">FencePostError</a>s. That's what I get for forgetting to <a href="CodeUnitTestFirst.html">CodeUnitTestFirst</a>! -- <a href="ElizabethWiethoff.html">ElizabethWiethoff</a>
      </p>
      <p>
        You realize, of course, that "this means war", as Daffy Duck was fond of saying: you have implicitly created a new programming challenge! I.e. writing <a href="BubbleSort.html">BubbleSort</a> in a natural way in a language more powerful than <a href="BasicLanguage.html">BasicLanguage</a>/<a href="FortranLanguage.html">FortranLanguage</a>, where focus on indices and lengths is somewhat unnatural. I hadn't thought about it before, but offhand I would think that <a href="MergeSort.html">MergeSort</a> would be the most natural sort for such languages, given <a href="DivideAndConquer.html">DivideAndConquer</a> over chunks (and not needing to worry about extra allocation -- <a href="MergeSort.html">MergeSort</a> requiring O(n) space), but the challenge would be to take the natural <a href="MergeSort.html">MergeSort</a> and distort it into a natural <a href="BubbleSort.html">BubbleSort</a>. Extra credit for distorting <a href="QuickSort.html">QuickSort</a> into Bubblesort. :-)
      </p>
      <ul>
        <li>
           Sounds like an <a href="AbstractionInversion.html">AbstractionInversion</a> (after all Perl already has array sorting capability).
        </li>
        <li>
           <em>There are any number of criticisms you could make about it, but that's missing the point that we're just talking about a toy exercise, like </em><a href="EightQueensInManyProgrammingLanguages.html">EightQueensInManyProgrammingLanguages</a>. Surely you don't think we're talking about using <a href="BubbleSort.html">BubbleSort</a> for a serious application?<em></em>
        </li>
      </ul>
      <p>
        I'm the kind of algorithm geek such that I implemented the new (a few years old, but not all that well known) RobertSedgewick/<a href="JonBentley.html">JonBentley</a> improvements to <a href="QuickSort.html">QuickSort</a> as soon as I heard about it. Not because I'm a sorting expert, but because I was so impressed. I'm also the kind of geek that is highly impressed with things like the very impressive <a href="MultiplyAndSurrender.html">MultiplyAndSurrender</a>. :-) It's lovely, in an utterly warped, twisted, deviant way. I admire the creativity involved.
      </p>
      <p>
        BTW I remember at least 3 times that I tried but couldn't remember how to do <a href="BubbleSort.html">BubbleSort</a>; I think this must mean that there's something about <a href="BubbleSort.html">BubbleSort</a> that is unnatural, even though (like most things) it's obvious in retrospect once one refreshes one's memory. That's not the same as natural. -- <a href="DougMerritt.html">DougMerritt</a>
      </p>
      <p>
        FYI: Amazon says <em></em><a href="MasteringAlgorithmsWithPerl.html">MasteringAlgorithmsWithPerl</a><em> presents a "dozen or so sorting algorithms." Thanks to you, Earle, I'm rereading </em><a href="MasteringAlgorithmsWithCee.html">MasteringAlgorithmsWithCee</a><em>... Now, later, I'm reading </em><a href="MasteringAlgorithmsWithPerl.html">MasteringAlgorithmsWithPerl</a><em>. </em><a href="BubbleSort.html">BubbleSort</a> is covered in the Perl book, but not the C book. -- <a href="ElizabethWiethoff.html">ElizabethWiethoff</a>
      </p>
      <hr/>
      <p>
        <a href="BubbleSort.html">BubbleSort</a> lines of text using <a href="PerlLanguage.html">PerlLanguage</a> <a href="RegularExpression.html">RegularExpression</a> operations, not an array:
      </p>
      <code>
        $_ = <<EOF;<br/>
        Perl<br/>
        Python<br/>
        Ruby<br/>
        JavaScript<br/>
        Java<br/>
        Fortran<br/>
        C<br/>
        C++<br/>
        Basic<br/>
        Pascal<br/>
        Lisp<br/>
        EOF<br/>
      </code>
      <code>
        my ($count, $swaps, $done) = (0, 0, 0);<br/>
        until ($done) {<br/>
        m|^(.+\n){$count}|g;   # match first '$count' lines in $_<br/>
        if (m|\G(.+)\n(.+)|) { # try matching the next pair<br/>
        if ($2 lt $1) {             # if they're in the wrong order<br/>
        s|\G(.+)\n(.+)|$2\n$1|; # swap 'em round<br/>
        $swaps++;<br/>
        } else {       # otherwise,<br/>
        pos() = 0; # reset the \G boundary for $_<br/>
        }<br/>
        $count++;<br/>
        } else {<br/>
        $done = 1 if ($swaps == 0); # done if there were no swaps<br/>
        ($count, $swaps) = (0, 0);  # reset for next time around<br/>
        }<br/>
        }<br/>
      </code>
      <code>
        print;<br/>
      </code>
      <p>
        The above code (except the here document) is from <em></em><a href="BeginningPerl.html">BeginningPerl</a><em>, 1st ed. This is the first elementary sort I've seen which does not use an array (or Python "list" or whatever array-like structure the language supports). It doesn't even use indices. Not really. The closest it gets to using indices is pattern matching on a number of lines counted as it goes and fiddling with the \G global match boundary. Curious, indeed! And very Perl-ish. -- </em><a href="ElizabethWiethoff.html">ElizabethWiethoff</a>
      </p>
      <hr/>
      <p>
        In a way, this <a href="RubyLanguage.html">RubyLanguage</a> solution is overkill because it requires a lot of support code to enable the actual sort routine, but the support code is general-purpose and helps with any code that needs to abstract away array element read/write access.
      </p>
      <code>
        # Iterates over an array, and provides<br/>
        # read/write access to the current and next<br/>
        # elements at each step.<br/>
        class A<strong>'rrayStepper</strong><br/>
        include Enumerable<br/>
      </code>
      <code>
        def initialize(array)<br/>
        @index = -1<br/>
        @array = array<br/>
        end<br/>
      </code>
      <code>
        # Get or set the value at the current position.<br/>
        def cur ; @array[@index] ; end<br/>
        def cur=(value) ; @array[@index] = value ; end<br/>
      </code>
      <code>
        # Get or set the value at the next position.<br/>
        def prev ; @array[@index-1] ; end<br/>
        def prev=(value) ; @array[@index-1] = value ; end<br/>
      </code>
      <code>
        # Check if the array has items after/before current.<br/>
        def has_next? ; @index + 1 < @array.length ; end<br/>
        def has_prev? ; @index > 0 ; end<br/>
      </code>
      <code>
        def swap_with_prev<br/>
        self.prev, self.cur = self.cur, self.prev<br/>
        end<br/>
      </code>
      <code>
        def swap(other_step)<br/>
        self.cur, other_step.cur = other_step.cur, self.cur<br/>
        end<br/>
      </code>
      <code>
        # Moves to the next position in the array.<br/>
        def to_next<br/>
        @index += 1<br/>
        return self<br/>
        end<br/>
      </code>
      <code>
        # Any methods not responded to by the stepper<br/>
        # are passed through to the current element<br/>
        # object.<br/>
        def method_missing(sym, *args)<br/>
        cur.send(sym, *args)<br/>
        end<br/>
        def respond_to?(sym)<br/>
        super || cur.respond_to?(sym)<br/>
        end<br/>
      </code>
      <code>
        # Starts before the first element, and<br/>
        # repeatedly moves to the next, passing the<br/>
        # stepper to the supplied block.<br/>
        # The "each" iterator of a clone of the stepper<br/>
        # proceeds from the subsequent item to the end.<br/>
        def each<br/>
        yield(to_next) while has_next?<br/>
        end<br/>
      </code>
      <code>
        end<br/>
      </code>
      <code>
        module ArrayStepping<br/>
      </code>
      <code>
        # Any method call names beginning with<br/>
        # stepper_... generate a new stepper, then<br/>
        # use the remainder of the method name as a<br/>
        # call to the stepper with yield.<br/>
        def method_missing(sym, *args)<br/>
        ( match = /^stepper_/.match(sym.to_s) ) || <br/>
        ( return super )<br/>
        stepper = ArrayStepper.new(self)<br/>
        stepper.send(match.post_match.to_sym, *args) {|*a| yield *a }<br/>
        end<br/>
      </code>
      <code>
        end<br/>
      </code>
      <code>
        class Array<br/>
        include ArrayStepping<br/>
        end<br/>
      </code>
      <code>
        def bubble_sort!(array)<br/>
        loop do<br/>
        ( array.stepper_inject(false) do |again, st|<br/>
        next ( st.has_prev? and st.prev > st ?<br/>
        (st.swap_with_prev ; true) :<br/>
        again<br/>
        )<br/>
        end<br/>
        ) || break<br/>
        end<br/>
        return array<br/>
        end<br/>
      </code>
      <code>
        def selection_sort!(array)<br/>
        array.stepper_each do |i|<br/>
        i.clone.each do |j|<br/>
        i.swap(j) if i > j<br/>
        end<br/>
        end<br/>
        return array<br/>
        end<br/>
      </code>
      <p>
        - <a href="SteveJorgensen.html">SteveJorgensen</a>
      </p>
      <hr/>
      <p>
        Obligatory <a href="ForthLanguage.html">ForthLanguage</a> version:
      </p>
      <code>
        : Perl          s" Perl" ;<br/>
        : Python        s" Python" ;<br/>
        : Ruby          s" Ruby" ;<br/>
        : <a href="JavaScript.html">JavaScript</a>    s" <a href="JavaScript.html">JavaScript</a>" ;<br/>
        : Java          s" Java" ;<br/>
        : Fortran       s" Fortran" ;<br/>
        : C             s" C" ;<br/>
        : C++           s" C++" ;<br/>
        : Basic         s" Basic" ;<br/>
        : Pascal        s" Pascal" ;<br/>
        : Lisp          s" Lisp" ;<br/>
      </code>
      <code>
        create pointers<br/>
        ' Perl , ' Python , ' Ruby , ' <a href="JavaScript.html">JavaScript</a> , ' Java ,<br/>
        ' Fortran , ' C , ' C++ , ' Basic , here ' Pascal ,<br/>
        ' Lisp ,<br/>
      </code>
      <code>
        constant penultimate<br/>
      </code>
      <code>
        : name      @ execute ;                                         <em>resolve a table entry to a name string</em><br/>
        : swp       >r r@ @ r@ cell+ @ swap r@ cell+ ! r> ! ;           <em>swap adjacent table entries</em><br/>
        : pair      dup name rot cell+ name ;                           <em>two adjacent names</em><br/>
        : arrange   dup pair compare 0> if swp exit then drop ;<br/>
        : bubble    penultimate begin 2dup u> if 2drop exit then        <em>bubbles from end of list towards the beginning.</em><br/>
        dup arrange [ 1 cells ] literal - again ;<br/>
        : sort      pointers begin dup penultimate u> if drop exit<br/>
        then dup bubble cell+ again ;<br/>
      </code>
      <code>
        : e         dup name type space cell+ ;<br/>
        : show      pointers e e e e e e e e e e e drop cr ;            <em>display current table state</em><br/>
        : demo      show sort show ;<br/>
        demo<br/>
      </code>
      <p>
        --SamuelFalvo
      </p>
      <hr/>
      <p>
        java-like version at <a href="ProofAnnotationsForBubbleSort.html">ProofAnnotationsForBubbleSort</a>.
      </p>
      <hr/>
      <p>
        <a href="CategoryAlgorithm.html">CategoryAlgorithm</a> <a href="SortingAlgorithms.html">SortingAlgorithms</a>
      </p>
    </div>
  </body>
</html>