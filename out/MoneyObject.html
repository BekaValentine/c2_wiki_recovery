<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Money Object
      </h1>
      <p>
        Money is a complicated topic, especially if you're dealing with multiple currencies.
      </p>
      <hr/>
      <p>
        See <a href="MartinFowler.html">MartinFowler</a>'s <a href="QuantityPattern.html">QuantityPattern</a> for some ideas on making a <a href="MoneyObject.html">MoneyObject</a>.  Also see his <em>Money</em> pattern available at <a href="http://www.martinfowler.com/eaaCatalog/money.html">http://www.martinfowler.com/eaaCatalog/money.html</a>
      </p>
      <p>
        <a href="MoneyObject.html">MoneyObject</a> also seen in <a href="JavaUnit.html">JavaUnit</a> "sample application" code.
      </p>
      <p>
        Memory management issues of <a href="ValueObject.html">ValueObject</a><strong>'s discussed in "Do </strong><a href="ValueObjectsRequireGarbageCollection.html">ValueObjectsRequireGarbageCollection</a>?"
      </p>
      <hr/>
      <p>
        A <a href="MoneyObject.html">MoneyObject</a> would have an "Amount" and a "Currency" as attributes.
      </p>
      <p>
        The "Amount" should be an "assumed decimal" integer, to avoid rounding issues.
        <em>(Or, one may still store the value in a floating point variable, but limit usage to integer values.  A double can often store more digits than a long.)</em>
      </p>
      <p>
        <em>Or store it as a number with integer part, numerator and denominator all defined as integers. Then it is up to </em><a href="BusinessObject.html">BusinessObject</a>s or views to deal with the RoundingIssues on presentation of the data.<em></em>
      </p>
      <p>
        The "Currency" could be a Singleton (<a href="SingletonPattern.html">SingletonPattern</a>), and may hold the number of digits (positive or negative) to assume.
      </p>
      <hr/>
      <p>
        Then there's the issue of currency conversion...
      </p>
      <p>
        There's a lot to be said for accumulating multiple currency amounts in a <a href="MoneyBag.html">MoneyBag</a>, and doing the currency conversion "at the end."
        That is, if you can, convert the totals, not the individual detail line amounts.
      </p>
      <p>
        Widely used exchange rates are really only good for six significant digits <strong>at best.</strong>
        Reality is more like three or four.
        So if you're converting a million dollars, it's hard to get really worked up about pennies.  ...or dollars, for that matter.
      </p>
      <hr/>
      <p>
        The <a href="XpMailingList.html">XpMailingList</a> contains a post by <a href="KentBeck.html">KentBeck</a>, the gist of which is "Why I write a new <a href="MoneyObject.html">MoneyObject</a> for each client". [<a href="http://groups.yahoo.com/group/extremeprogramming/message/3304]">http://groups.yahoo.com/group/extremeprogramming/message/3304]</a>
      </p>
      <hr/>
      <p>
        Java SDK 1.4 introduces a Currency object which can be handy in some cases. Javadoc for it can be found at <a href="http://java.sun.com/j2se/1.4/docs/api/index.html">http://java.sun.com/j2se/1.4/docs/api/index.html</a>
      </p>
      <ul>
        <li>
           Direct link: <a href="http://java.sun.com/j2se/1.4/docs/api/java/util/Currency.html.">http://java.sun.com/j2se/1.4/docs/api/java/util/Currency.html.</a> The main purpose of this class is to keep in a Singleton way the different world currencies according to ISO standards. --<a href="FelipeHoffa.html">FelipeHoffa</a>
        </li>
      </ul>
      <hr/>
      <p>
        Most money objects are ill conceived. For example, all of large integer, rational number and floating point representations are useful within the same abstraction. Money objects should not round or truncate on their own in any calculation. Rather, rounding is associated with transactions and should be performed in this context. Mixed currency calculations have another set of representational and boundary condition issues which were explored with my work on <a href="WyCash.html">WyCash</a> and reported by Kent. -- <a href="WardCunningham.html">WardCunningham</a>
      </p>
      <p>
        <em>You seem to be saying that to do it "right" requires a fairly complex framework that is beyond a single class.</em>
      </p>
      <p>
        But not all customers really care all that much.
      </p>
      <p>
        I'm having a hard time getting my business users to care what date is used to exchange the currency.
        We're trying to match the currency conversions done by our customers, without knowing the date or exchange rate they used.
        We're lucky to get two digits of precision in such a situation.
      </p>
      <hr/>
      <p>
        See also: <a href="FloatingPointCurrency.html">FloatingPointCurrency</a>, <a href="BigDecimal.html">BigDecimal</a>
      </p>
    </div>
  </body>
</html>