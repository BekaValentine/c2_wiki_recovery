<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Refactor Broken Unit Tests
      </h1>
      <p>
        <em>Here's the problem. You have written unit tests, both to help you understand your design and to find bugs. In due time, you refactor your code, which causes tests to break. The interface they communicate with has changed, so they must change to match. Are there reasonable alternatives to </em><a href="RefactorBrokenUnitTests.html">RefactorBrokenUnitTests</a>??<em></em>
      </p>
      <p>
        There's a bit of detailed discussion on <a href="DeletingBrokenUnitTests.html">DeletingBrokenUnitTests</a>. 
      </p>
      <p>
        If you always <a href="RefactorBrokenUnitTests.html">RefactorBrokenUnitTests</a>, lots of good things happen:
      </p>
      <ul>
        <li>
           If you need to change the interface that the tests use, there are probably interface changes in the using code as well. Might as well fix them all.
        </li>
        <li>
           Removing tests from the system can only decrease reliability. Leaving them in maintains reliability.
        </li>
        <li>
           Removing tests from the system may save time right now. However, fewer tests in the system will slow down development - perhaps only by a little, but it will slow you down through increased debugging and decreased clarity. Leaving the tests in keeps your speed where it is.
        </li>
      </ul>
      <p>
        Therefore, when you refactor, <a href="RefactorBrokenUnitTests.html">RefactorBrokenUnitTests</a>.
      </p>
      <hr/>
      <p>
        Can you give a specific example of <a href="RefactorBrokenUnitTests.html">RefactorBrokenUnitTests</a>? This advice needs more detail before I can get an adequate feel for what it means in practice:
      </p>
      <ul>
        <li>
           What kinds of refactorings are done? 
        </li>
        <li>
           How often are the refactorings made to the test code, and how often are they made to the product code in support of tests?
        </li>
        <li>
           How much test support code might I expect to end up with? (Either in the test code or the product code.)
        </li>
        <li>
           Do refactorings insulate against further code changes, either by design or emergently?
        </li>
      </ul>
      <p>
        See the first example in <a href="MovingBrokenUnitTests.html">MovingBrokenUnitTests</a>. My gut feel is that, for that case, <a href="RefactorBrokenUnitTests.html">RefactorBrokenUnitTests</a> and <a href="MovingBrokenUnitTests.html">MovingBrokenUnitTests</a> really mean much the same thing. That is, in both cases you'd end up using a parser. 
      </p>
      <p>
        How often are they so similar? Not always, of course. Still, although <a href="RefactorBrokenUnitTests.html">RefactorBrokenUnitTests</a> is strictly more general, how often does it amount to finding a pre-existing stable interface and "promoting" tests there? --<a href="BrianMarick.html">BrianMarick</a>
      </p>
      <hr/>
      <p>
        See <a href="MovingBrokenUnitTests.html">MovingBrokenUnitTests</a>, <a href="DeletingBrokenUnitTests.html">DeletingBrokenUnitTests</a>, <a href="TwoYearItch.html">TwoYearItch</a>.
      </p>
    </div>
  </body>
</html>