<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Shuffle Test
      </h1>
      <p>
        import java.util.Random;
      </p>
      <p>
        public class <a href="ShuffleTest.html">ShuffleTest</a> {
      </p>
      <code>
        private static final int NUM_ITERATIONS = 10000000;<br/>
        private static final int DECK_SIZE = 52;<br/>
      </code>
      <code>
        public static void main(String[] args) {<br/>
      </code>
      <code>
        //<br/>
        // Create the deck<br/>
        //<br/>
      </code>
      <code>
        int[] deck = new int[DECK_SIZE];<br/>
      </code>
      <code>
        for (int i = 0; i < deck.length; i++) {<br/>
        deck[i] = i;<br/>
        }<br/>
      </code>
      <code>
        //<br/>
        // Count the number of matches for various shuffles.<br/>
        //<br/>
      </code>
      <code>
        Random random = new Random(System.currentTimeMillis());<br/>
      </code>
      <code>
        int badShuffleMatchCount = 0;<br/>
        int goodShuffleMatchCount = 0;<br/>
        int evenBetterShuffleMatchCount = 0;<br/>
      </code>
      <code>
        for (int i = 0; i < NUM_ITERATIONS; i++) {<br/>
      </code>
      <code>
        //<br/>
        // Bad shuffle<br/>
        //<br/>
      </code>
      <code>
        int[] deckCopy = copyDeck(deck);<br/>
      </code>
      <code>
        for (int j = 0; j < 100; j++) {<br/>
        int randomIndex1 = random.nextInt(deck.length);<br/>
        int randomIndex2 = random.nextInt(deck.length);<br/>
      </code>
      <code>
        int tmp = deck[randomIndex1];<br/>
        deck[randomIndex1] = deck[randomIndex2];<br/>
        deck[randomIndex2] = tmp;<br/>
        }<br/>
      </code>
      <code>
        badShuffleMatchCount += countMatches(deckCopy, deck);<br/>
      </code>
      <code>
        //<br/>
        // Good shuffle<br/>
        //<br/>
      </code>
      <code>
        deckCopy = copyDeck(deck);<br/>
      </code>
      <code>
        for (int j = 0; j < deck.length; j++) {<br/>
        int randomIndex = random.nextInt(deck.length);<br/>
      </code>
      <code>
        int tmp = deck[j];<br/>
        deck[j] = deck[randomIndex];<br/>
        deck[randomIndex] = tmp;<br/>
        }<br/>
      </code>
      <code>
        goodShuffleMatchCount += countMatches(deckCopy, deck);<br/>
      </code>
      <code>
        //<br/>
        // Even better shuffle<br/>
        //<br/>
      </code>
      <code>
        deckCopy = copyDeck(deck);<br/>
      </code>
      <code>
        for (int j = 0; j < deck.length; j++) {<br/>
        int randomIndex = j + random.nextInt(deck.length - j);<br/>
      </code>
      <code>
        int tmp = deck[j];<br/>
        deck[j] = deck[randomIndex];<br/>
        deck[randomIndex] = tmp;<br/>
        }                <br/>
      </code>
      <code>
        evenBetterShuffleMatchCount += countMatches(deckCopy, deck);<br/>
        }<br/>
      </code>
      <code>
        System.out.println("Bad shuffle # matches: " + badShuffleMatchCount +<br/>
        " (" +<br/>
        (badShuffleMatchCount / (double)NUM_ITERATIONS) +<br/>
        " per shuffle)");<br/>
      </code>
      <code>
        System.out.println("Good shuffle # matches: " + goodShuffleMatchCount +<br/>
        " (" +<br/>
        (goodShuffleMatchCount / (double)NUM_ITERATIONS) +<br/>
        " per shuffle)");<br/>
      </code>
      <code>
        System.out.println("Even better shuffle # matches: " +<br/>
        evenBetterShuffleMatchCount +<br/>
        " (" +<br/>
        (evenBetterShuffleMatchCount /<br/>
        (double)NUM_ITERATIONS) +<br/>
        " per shuffle)");<br/>
      </code>
      <code>
        } // main<br/>
      </code>
      <code>
        private static int[] copyDeck(int[] deck) {<br/>
      </code>
      <code>
        int[] deckCopy = new int[deck.length];<br/>
      </code>
      <code>
        for (int i = 0; i < deckCopy.length; i++) {<br/>
        deckCopy[i] = deck[i];<br/>
        }<br/>
      </code>
      <code>
        return deckCopy;<br/>
      </code>
      <code>
        } // copyDeck<br/>
      </code>
      <code>
        private static int countMatches(int[] deck1, int[] deck2) {<br/>
      </code>
      <code>
        int numMatches = 0;<br/>
      </code>
      <code>
        for (int i = 0; i < deck1.length; i++) {<br/>
        if (deck1[i] == deck2[i]) {<br/>
        numMatches++;<br/>
        }<br/>
        }<br/>
      </code>
      <code>
        return numMatches;<br/>
      </code>
      <code>
        } // countMatches<br/>
      </code>
      <p>
        } // <a href="ShuffleTest.html">ShuffleTest</a>?
      </p>
      <p>
        Kevin Regan (kregan@amazon.com), 1 June 2004
      </p>
    </div>
  </body>
</html>