<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Persistent Data Structure
      </h1>
      <p>
        The phrase 'persistent data structure' does not refer to database persistence, but rather to preservation of the old structure across updates. This is an unfortunate overloading of the word, but historical. <a href="FunctionalProgramming.html">FunctionalProgramming</a> uses these extensively.
      </p>
      <p>
        A classic example is a tree. Given a tree of the form:
      </p>
      <code>
        . . . . . A . . . .<br/>
        . . . . / . \ . . .<br/>
        . . . B . . . C . .<br/>
        . . / | \ . . | \ .<br/>
        . D . E . F . G . H<br/>
      </code>
      <p>
        We can update E to E' and preserve most of the tree:
      </p>
      <code>
        . . . . . A'. . . .<br/>
        . . . . / . \ . . .<br/>
        . . . B'. . . C . .<br/>
        . . / | \ . . | \ .<br/>
        . D . E'. F . G . H<br/>
      </code>
      <p>
        The total cost of this update is proportional to the height of the tree rather than to the number of elements - i.e. O(lg(N)). Compared to in-place updates, it is likely more expensive since we need to allocate three new nodes, but this expense is often justifiable if we have use of the old version (i.e. for concurrent readers in <a href="ReadCopyUpdate.html">ReadCopyUpdate</a>, or multiple clients in an <a href="ObserverPattern.html">ObserverPattern</a>.)
      </p>
      <p>
        Use of some data structures, such as FingerTrees, allow amortized O(1) updates (with worst-case O(lg(N))) for the first and last elements, basically by inverting the graph structure so that the edges are at the top instead of the middle. Thus, we can achieve O(1) deques and queues by use of persistent data structures. 
      </p>
      <hr/>
      <p>
        see <a href="http://en.wikipedia.org/wiki/Persistent_data_structure">http://en.wikipedia.org/wiki/Persistent_data_structure</a>
      </p>
    </div>
  </body>
</html>