<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Testing Regular Expressions
      </h1>
      <p>
        At a recent meeting of the <a href="TorontoXpUsersGroup.html">TorontoXpUsersGroup</a>, the subject of regular expressions came up.
      </p>
      <p>
        The original chunk of code that sparked the discussion had a method with several conditional <a href="RegularExpressions.html">RegularExpressions</a> in it. Each regular expression had a one line comment above it explaining what it did.
      </p>
      <p>
        A suggestion was made that all these regular expressions be refactored into methods with appropriately descriptive names. This would remove the need for the comments and would also make it possible to write test cases for each individual regular expression.
      </p>
      <p>
        The downside to this suggestion would be that if the code had a reasonably large number of regular expressions then the number of tiny methods would increase dramatically. I'm generally in favour of smaller methods that do a single thing but for some reason that I can't really explain, the thought of splitting regular expressions out such that there was one method per regular expressions each seemed excessive.
      </p>
      <p>
        Now that I've thought about it a bit, I think it's worth trying for a while to see if it's actually workable. I really like the idea of being able to write individual test cases for my regular expressions. Perhaps not all of them, but at least the complex ones.
      </p>
      <p>
        FWIW the code in question was written in <a href="RubyLanguage.html">RubyLanguage</a> although this applies to any language that has <a href="RegularExpression.html">RegularExpression</a> support.
      </p>
      <p>
        -- <a href="MikeBowler.html">MikeBowler</a>
      </p>
      <hr/>
      <p>
        I think that there is one more reason why it is a good idea to refactor (<a href="ExtractMethod.html">ExtractMethod</a>) in this way. I am no expert in regular expressions, but I noticed that each of the regular expressions that were in the code looked very similar. Almost as though the lines were cut and paste into place and then modified slightly.
      </p>
      <p>
        I would expect that there would be enough in common between each of the methods that are extracted out to enable reuse. This, to me is one of the main reasons why <a href="ExtractMethod.html">ExtractMethod</a> (and SmallMethods for that matter) are very useful in code. -- <a href="MonteDenby.html">MonteDenby</a>
      </p>
      <hr/>
      <p>
        If the code actually had a similarity such as this then it would be a good idea to refactor them into a method but this was not actually the case. Each one was very distinct in operation and structure. -- <a href="BryanZarnett.html">BryanZarnett</a>
      </p>
      <hr/>
      <p>
        It would be very unlikely that the any of the regular expressions would be reusable in the way <a href="MonteDenby.html">MonteDenby</a> suggests as each one is very different. The only advantages to using <a href="ExtractMethod.html">ExtractMethod</a> in this case would be 
      </p>
      <ul>
        <li>
           the ability to test each regular expression individually (a significant advantage)
        </li>
        <li>
           the ability to remove the comment and replace it with a useful method name
        </li>
      </ul>
      <p>
        -- <a href="MikeBowler.html">MikeBowler</a>
      </p>
      <hr/>
      <p>
        Nowadays, my code tends to be <a href="LotsOfShortMethods.html">LotsOfShortMethods</a>. I never used to code that way, but after reading <a href="RefactoringImprovingTheDesignOfExistingCode.html">RefactoringImprovingTheDesignOfExistingCode</a>, my coding style has changed quite a bit. I'm getting comfortable with the <a href="LotsOfShortMethods.html">LotsOfShortMethods</a> style, and starting to like it a lot.
      </p>
      <hr/>
      <p>
        Some sample (Perl) code:
      </p>
      <code>
        # Replace all triple quotes with bold<br/>
        s,'{3}(.+?)'{3},<b>$1</b>,g<br/>
      </code>
      <code>
        # Replace all double quotes with italics<br/>
        s,'{2}(.+?)'{2},<em>$1</em>,g<br/>
      </code>
      <hr/>
      <p>
        <a href="CategoryRefactoring.html">CategoryRefactoring</a>
      </p>
    </div>
  </body>
</html>