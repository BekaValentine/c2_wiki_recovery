<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Try Catch With Ruby Blocks
      </h1>
      <p>
        <em></em>'<a href="RenameMe.html">RenameMe</a> to ContinuationsInRuby ?<em></em>'
      </p>
      <p>
        People on <a href="BlocksInPython.html">BlocksInPython</a> want to see TryCatch implemented in <a href="RubyLanguage.html">RubyLanguage</a>. I won't dive in a <a href="SchemeLanguage.html">SchemeLanguage</a>-like continuation-based <a href="ErrorHandling.html">ErrorHandling</a>, just note that this (somewhat) already exists:
      </p>
      <code>
        def routine(n)<br/>
        puts n<br/>
        throw :done if n <= 0<br/>
        routine(n-1)<br/>
        end<br/>
      </code>
      <code>
        catch(:done) do<br/>
        routine(3)<br/>
        end<br/>
      </code>
      <hr/>
      <p>
        <a href="RubyLanguage.html">RubyLanguage</a>'s 'throw' and 'catch' is <a href="GoTo.html">GoTo</a>. <a href="GoTo.html">GoTo</a> has its uses, but for conventional <a href="ErrorHandling.html">ErrorHandling</a> use 'raise' and 'rescue':
      </p>
      <code>
        def factorial(n)<br/>
        raise ArgumentError, "factorial arg must be >= 0: #{n}" unless n >= 0<br/>
        return 1 if n.zero?<br/>
        (1..n).inject(1) { |product, i| product * i }<br/>
        end<br/>
      </code>
      <code>
        while true<br/>
        print 'Enter a number (-1 to quit): '<br/>
        n = gets.to_i<br/>
        exit if n == -1<br/>
        begin<br/>
        puts "#{n}! = #{factorial(n)}"<br/>
        rescue ArgumentError => e<br/>
        puts e<br/>
        end<br/>
        end<br/>
      </code>
      <hr/>
      <p>
        See also <a href="ContinuationsAreGotos.html">ContinuationsAreGotos</a>, <a href="ContinuationsInPython.html">ContinuationsInPython</a>
      </p>
      <hr/>
      <p>
        <a href="CategoryRuby.html">CategoryRuby</a>
      </p>
    </div>
  </body>
</html>