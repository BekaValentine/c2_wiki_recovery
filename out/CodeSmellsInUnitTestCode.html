<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Code Smells In Unit Test Code
      </h1>
      <p>
        From the paper that started this link (<a href="http://www.cwi.nl/~leon/papers/xp2001/xp2001.pdf):">http://www.cwi.nl/~leon/papers/xp2001/xp2001.pdf):</a>
      </p>
      <ul>
        <li>
           MysteryGuest
        </li>
        <li>
           ResourceOptimism
        </li>
        <li>
           TestRunWar
        </li>
        <li>
           GeneralFixture
        </li>
        <li>
           EagerTest
        </li>
        <li>
           LazyTest
        </li>
        <li>
           AssertionRoulette
        </li>
        <li>
           IndirectTesting
        </li>
        <li>
           ForTestersOnly
        </li>
        <li>
           SensitiveEquality
        </li>
        <li>
           TestCodeDuplication
        </li>
      </ul>
      <p>
        Other suggestions:
      </p>
      <ul>
        <li>
           <a href="OnceAndOnlyOnce.html">OnceAndOnlyOnce</a>
        </li>
      </ul>
      <hr/>
      <p>
        Yes I am claiming that <a href="OnceAndOnlyOnce.html">OnceAndOnlyOnce</a> is a smell in unit test code (and therefore disagreeing with TestCodeDuplication). When a test fails I want to look at the test method and see exactly what it did. I don't want to have to hunt through lots of tiny methods, or worse, separate classes, to understand the test. I want to be able to see at a glance that there isn't a bug in the test itself. --<a href="GrahamJenkins.html">GrahamJenkins</a>
      </p>
      <p>
        <em>Hmmmmm.....that's interesting, but potentially impractical, especially considering complex tests that need to do things like setting up database connections, populating the database, etc.   I would contend that at least modularity is still needed in those instances just to help us delimit the parts of the test that we've "tested" already from those that are unique to the particular unit test. --</em><a href="KyleBrown.html">KyleBrown</a><em></em>
      </p>
      <hr/>
      <p>
        <em>When a test fails I want to look at the test method and see exactly what it did</em> --<a href="GrahamJenkins.html">GrahamJenkins</a>, above
      </p>
      <p>
        Agreed.  However, when I want to change the way something works, I don't want to have to update more than one test case.
      </p>
      <p>
        The balance, therefore, is...
      </p>
      <hr/>
      <p>
        Production code has several clients (at least two).  
      </p>
      <p>
        Unit test code really only has one.  
      </p>
      <p>
        There is a large degree of flexibility which gets refactored into the production code which is simply not needed (and in some cases can be downright harmful) in test code.  Flexibity in what you <em>could</em> prove with a given method is not a useful trait in a test method;  the idea is that each method demonstrates one concrete task, and can determine if it was successful.
      </p>
      <p>
        I frequently write code in test methods that I would wince at if I saw in production code.  The duplication, in this context, frequently <em>gives</em> me flexibility in writing the tests.  If it is really that bothersome, I've found that it usually means that the <em>production</em> code needs more work.
      </p>
      <p>
        --<a href="WilliamUnderwood.html">WilliamUnderwood</a>
      </p>
      <hr/>
      <p>
        See also: <a href="RefactoringTestCode.html">RefactoringTestCode</a>.
      </p>
    </div>
  </body>
</html>