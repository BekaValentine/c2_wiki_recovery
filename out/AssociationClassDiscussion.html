<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Association Class Discussion
      </h1>
      <p>
        What I've gotten so far about <a href="AssociationClass.html">AssociationClass</a> is that it isn't about programming, it's about modeling, e.g. with UML. I'm seeing here an answer to a question that I'd never ask. Let me elaborate in hopes that someone will explain that I'm wrong.
      </p>
      <p>
        To me, the workflow monitors thing would go this way:
      </p>
      <p>
        I'm implementing a <a href="WorkFlow.html">WorkFlow</a> system. I have monitors monitoring things (stages?). When a monitor goes off it should generate a task from a task factory. (I'm assuming from Peter's text that the task generated by the factory is a function of the monitor. Wish I had  his code.)
        So I've got code in Monitor that does that:
      </p>
      <code>
        monitorFires<br/>
        Task_Factory generateTask: self<br/>
      </code>
      <p>
        Now it evolves that depending on the stage, which I suppose is an instance variable in the Monitor, I need a different task created for generateSpecificTask. So I need to look up the monitor based on stage:
      </p>
      <code>
        monitorFires<br/>
        self taskFactory generateTask: self<br/>
      </code>
      <p>
        where Peter tells me that taskFactory is a function of the class of the stage <em>and' the class of the monitor. (I note in passing that this seems suspicious, in that things depending on the classes of other things is a danger signal, but I'm going with it.) So I build a dictionary in each monitor class mapping from stage class to taskFactory class:</em>
      </p>
      <code>
        taskFactory<br/>
        ^self class taskFactoryDictionary at: stage class<br/>
      </code>
      <p>
        on the class side, possibly in a Class Instance Variable (another danger sign):
      </p>
      <code>
        taskFactoryDictionary<br/>
        Task_Factory_Dictionary isNil ifTrue: [self initTaskFactoryDictionary].<br/>
        ^Task_Factory_Dictionary<br/>
      </code>
      <code>
        initTaskFactoryDictionary<br/>
        ^Dictionary new<br/>
        at: First_Stage put: First_Stage_Factory;<br/>
        at: Second_State put: Second_Stage_Factory;<br/>
        yourself<br/>
      </code>
      <p>
        Now, I'm having trouble believing that these are the requirements, but if they were, and understanding them only as well as I now do, I might refactor from the first case, with one factory, to this one, with one per stage class per monitor class.
      </p>
      <p>
        <em>[I also had trouble believing these were the requirements in this instance. But they are. --</em><a href="PeterMerel.html">PeterMerel</a>]<em></em>
      </p>
      <p>
        I could imagine an alternative structure for representing this information, ala a relational table, factoryTable, with fields Monitor_Class, Stage_Class, Factory_Class, key fields Monitor_Class and Stage_Class. Then the Factory_Class is answered by:
      </p>
      <code>
        taskFactory<br/>
        ^self taskFactoryRecord factoryClass<br/>
      </code>
      <code>
        taskFactoryRecord<br/>
        ^self factoryTable<br/>
        detect: [ :each | each monitorClass = self class <br/>
        and: [each stageClass = stage class]]<br/>
      </code>
      <p>
        [Now I'm guessing, having written this, that my factoryTable may be what Peter et al would call an associative array?]
      </p>
      <p>
        And now I can ask the question that is answered "<a href="AssociationClass.html">AssociationClass</a>".
      </p>
      <p>
        Ron: "What is the generic name for the object representing the relationship between monitor, stage, and factory?"
      </p>
      <p>
        Peter: "We call that an <a href="AssociationClass.html">AssociationClass</a>, and in UML we draw it thusly."
      </p>
      <p>
        Have I got it right? If not, can you fix me? (For that matter, if so, can you fix me?) --<a href="RonJeffries.html">RonJeffries</a>
      </p>
      <hr/>
      <p>
        I'd just call it a map or table of some sort.  UML uses the phrase <a href="AssociationClass.html">AssociationClass</a> for something else. -- <a href="MichaelFeathers.html">MichaelFeathers</a>
      </p>
      <p>
        Bummer. Then I still don't get it! Guess I'll look in the book.  --rj
      </p>
      <p>
        <em>Fwiw, I think you get it just fine, Ron. But maybe I'm mistaken and this feature of UML, without which I pragmatically would not do, is, as Michael insists, useless. I remain to be convinced of this, and I honestly wouldn't much care if </em><a href="UmlDistilled.html">UmlDistilled</a> or the <a href="ThreeAmigos.html">ThreeAmigos</a> themselves thought otherwise. YMMV.<em> --</em><a href="PeterMerel.html">PeterMerel</a>
      </p>
    </div>
  </body>
</html>