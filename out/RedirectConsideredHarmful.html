<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Redirect Considered Harmful
      </h1>
      <p>
        HTTP redirects are the new <a href="GoTo.html">GoTo</a>.
      </p>
      <p>
        <em>HTTP redirects are the new symlinks.</em> (WhatIsWrongWithSymlinks)
      </p>
      <p>
        HTML coders are the new <a href="SoftwareEngineer.html">SoftwareEngineer</a>s? Apache is the new Linux?
      </p>
      <hr/>
      <p>
        I don't get it. <a href="GoTo.html">GoTo</a> is bad because it's used in the context of an otherwise structured system, and it breaks the reader's expectations of that system. I don't see how redirect is comparable.
      </p>
      <p>
        The existence of redirect does lead to some slight complexity in the interface to the HTTP client library; because the response to the question "What is the content of this page?" might be "<a href="MuAnswer.html">MuAnswer</a>! That page is actually somewhere else." (in java, i'd make this an exception, and leave the return value as always being a valid page).
      </p>
      <p>
        <em>Why couldn't the client library just follow the redirect and return the page at the other end? Then there wouldn't be any additional complexity.</em>
      </p>
      <p>
        Because then the user of the client library (the client's client, if you will) would have a false assumption about the returned page - that its URL is the URL sent to the client library. This would lead to problems following relative URLs, amongst other things.
      </p>
      <p>
        <em>If the client library returned a Page object, then the URL could be part of it, and so would be available to the calling code.</em>
      </p>
      <p>
        True. I still prefer the latter; i suppose it's a matter of taste.
      </p>
      <dl>
        <dt> </dt>
        <dd><em>If you don't like redirects, why like exceptions? Exceptions are also harmful; use them only for </em>exceptional<em> circumstances.</em></dd>
      </dl>
      <hr/>
      <p>
        Hmmm... so if I can't do a redirect (cause its bad) how does the browser know where my page moved to?
      </p>
      <hr/>
      <p>
        Redirects are bad because <strong><em>why isn't the resource still there today at the location where it was yesterday?!?</em></strong>
        Was the original choice of URL so bad that they had to reorganize the entire tree structure?
      </p>
      <p>
        For my website, it moved because it was originally under a domain I didn't control.  It had been there for a few years already, so not wanting to loose any search engine placements (this was back in 1998), I moved my site to a domain I controled, and set up a permanent redirect to the new location.  
      </p>
      <p>
        Then there was the software project (that a friend was writing that I was hosting for him) that eventually grew to a commercial product.  When he got his own domain, I then redirected requests to his software package to his new commercial site.  
      </p>
      <p>
        Then there are the few redirects left where I initially made a bad decision in filenames and had to change.  It was a bit of a pain in setting up the redirects, but it fixed the filename problem.  --<a href="SeanConner.html">SeanConner</a>
      </p>
      <p>
        <em>Maybe they wanted to refactor. Isn't refactoring supposed to be a good thing?</em>
      </p>
      <p>
        If your external interface (the tree structure) changes when you refactor, something is wrong.
      </p>
      <p>
        <em>There are lots of reasons your URL may change.  Maybe you want to go to secure sockets, maybe you want add a new server, maybe you want to consolidate two pages, maybe you need to split directories because then have become too big.  Tree structures change and if you allow multiple entry points (another structured programming no-no), redirects provide a short-term patch.</em> 
      </p>
      <p>
        Why would you need to change your structure when adding a server? Moving to secure sockets and consolidating two pages aren't refactorings. Splitting a directory seems to the assume the structure of the site has to mirror the local directory structure. Using <a href="ApacheHttpd.html">ApacheHttpd</a> (and other servers, I'm sure) VirtualDirectories are easily set up.
      </p>
      <hr/>
      <p>
        File renaming is bad because <strong><em>why did you give the file the wrong name in the first place?!?</em></strong>
      </p>
      <p>
        Beating up on redirects because they shouldn't be necessary in the first place is like, um, like beating up on the workaround instead of the underlying problem.  
      </p>
      <p>
        -- DanielBarlow, often thought there should be a wiki page discussing the basic pointlessness of iWouldntStartFromHere as a problem solving technique
      </p>
      <hr/>
      <p>
        The landing page to a site often contains logic that determines the client type and redirects to a browser specific URL. Granted, the resulting URL isn't elegant, but it's a necessary evil. 
      </p>
      <p>
        As a protocol, HTTP is stateless and purely REQ/RESP driven. The intent was to inform requesting clients that a resource has moved. Most browsers commonly implement this by just requesting the redirected page on behalf of the user (and good thing too... I sure don't want to click OK on modal message boxes for every redirection!).
      </p>
      <p>
        Some app servers have implemented request forwarding in their APIs that allow server side logic to pass flow onto another page. 
      </p>
      <p>
        The purists will argue that this violates the intent of HTTP ("I only want the page I'm requesting. Tell me if I need another one") while the pragmatists will argue that page forwarding "cleans-up" the Internet by removing the "chatty" packet bursts associated with REQ-RESP(Redirect pay-load)-REQ Redirect.
      </p>
      <p>
        --<a href="MichaelLeach.html">MichaelLeach</a>
      </p>
      <hr/>
      <p>
        <em>If your external interface (the tree structure) changes when you refactor, something is wrong.</em>
      </p>
      <p>
        You are no more able to make your external interfaces perfect than you
        are your internal. Refactoring applies to all interfaces.
      </p>
      <p>
        <em>Doesn't the external behavior of the code change when 'refactoring' the interface? Doesn't that mean it isn't refactoring anymore?</em>
      </p>
      <hr/>
      <p>
        Hmm...  Did some of the previous posters forget that "refactoring" can include physically moving a set of pages from one ISP/domain/server-group to another?
      </p>
      <dl>
        <dt> </dt>
        <dd></dd>
      </dl>
      <p>
        <em>"Why did I get the URLs 'wrong' in the first place?"</em> <strong>Well, for example:</strong>
      </p>
      <dl>
        <dt> </dt>
        <dd>Suppose I create a web site using a provider that expects me to use only a certain amount of bandwidth.  (Think of some of the free services.)  My web site turns out to be popular and generates a LOT of hits.  My provider politely tells me to move my site elsewhere; they're also polite enough to temporarily supply a redirect so my visitors can still easily find me.</dd>
      </dl>
      <dl>
        <dt> </dt>
        <dd></dd>
      </dl>
      <p>
        Strictly speaking, I have refactored, since the URLs have changed (due to a change in who's doing the web hosting).  At another level of abstraction, I haven't refactored at all, I've just changed the physical layer.  URLs not only reflect logical structure, they also reflect physical structure, and they are influenced by political or business structure ("<a href="GeoCities.html">GeoCities</a>" dictates how its member URLs must be formed, for example).
      </p>
      <p>
        My point being: no logical-level interface survives its first encounter with the physical implementation.
      </p>
      <p>
        -- <a href="JohnBaldwin.html">JohnBaldwin</a>
      </p>
      <hr/>
      <p>
        To the refactoring advocates above:
      </p>
      <p>
        Sure one needs to refactor the internal and external interface. But this happens at two different time and size scales (because changes to the external interface are more expensive the optimum lies at different scales). And in the meantime a migration pattern is needed. For the web this is the redirect. You may propose another one. Some such means is required or else you move away from the optimum efficiency. -- <a href="GunnarZarncke.html">GunnarZarncke</a> 
      </p>
      <hr/>
      <p>
        Think outside the box.
      </p>
      <p>
        An HTTP redirect is an excellent way to respond to a POST request. By having the POST send a redirect, the user can't accidentally repost by clicking the "back" button -- all the pages in their history are the results of GET requests.
      </p>
      <p>
        It's also a convenient way to handle POST requests when the response is something that needs to be GETtable anyhow -- online shopping carts, and the wiki page you just edited, are two good examples.  <em>See </em><a href="RedirectAfterPost.html">RedirectAfterPost</a><em>.</em>
      </p>
    </div>
  </body>
</html>