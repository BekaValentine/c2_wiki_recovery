<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Unwind Protect
      </h1>
      <p>
        unwind-protect is a special operator in <a href="CommonLisp.html">CommonLisp</a> that allows the programmer to ensure that cleanup code is invoked whenever a block of code exits, regardless of how the exit occurs.  As Lisp features <a href="GarbageCollection.html">GarbageCollection</a> (deallocating memory is not a concern), this is primarily useful for files and other system resources which are scarce and not suitable for GC.
      </p>
      <p>
        Similar features exist in other languages; <a href="JavaLanguage.html">JavaLanguage</a> and <a href="CsharpLanguage.html">CsharpLanguage</a> both allow "finally" clauses as part of try blocks, which do essentially the same thing.  (One can write a try/finally block without any catch clauses if one only wants <a href="UnwindProtect.html">UnwindProtect</a> semantics and isn't seeking to write exception handlers).  <a href="CeePlusPlus.html">CeePlusPlus</a> doesn't have finally, but stack-allocated objects have their destructors automatically invoked whenever the containing stack frame exits--regardless if the exit is a normal or non-local return (return out of an interior block, or an exception being thrown)--see <a href="ResourceAcquisitionIsInitialization.html">ResourceAcquisitionIsInitialization</a>/ <a href="ResourceAllocationIsInitialization.html">ResourceAllocationIsInitialization</a>.  The one exception in C++ is longjmp() being called--this doesn't guarantee destructors being called (see <a href="UnwindingTheStack.html">UnwindingTheStack</a>)
      </p>
      <p>
        Scheme has this too, but it's called DynamicWind and also handles continuations properly.  DynamicWind lets you specify code that will be executed automatically when control enters or leaves the dynamic extent of the function.  So you could specify code to SetUp the open files or network connections and code to TearDown them, and whenever control enters or leaves the DynamicWind block, those are invoked.
      </p>
    </div>
  </body>
</html>