<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Private Branches
      </h1>
      <p>
        A private branch is a code line in your <a href="VersionControl.html">VersionControl</a> system that is not the public, main line.  It's not necessarily unreadable to other developers -- it's just not the <em>public</em> line, the one that everyone releases to.
      </p>
      <hr/>
      <p>
        In the context of XP, why would you use <a href="PrivateBranches.html">PrivateBranches</a>?
      </p>
      <p>
        <a href="RobertWatkins.html">RobertWatkins</a> offers these reasons:
      </p>
      <p>
        Private branches offer the following benefits:
      </p>
      <ul>
        <li>
           You can commit changes to a task prior to delivery, allowing you to rollback subsequent changes that didn't work. Visual Age users would be familiar with this sort of work. It's also possible to do this in Eclipse, with their Local Workspace History tool. Think of it as an extended undo.
        </li>
        <li>
           With this sort of support, you can follow Kent Beck's advice: whenever you get an unexpected test failure, simply rollback to your last committed version (which should be all of five minutes old).
        </li>
        <li>
           If you use an integration machine, private branches offer a convenient way of moving the code over; simply check into your private branch, merge it into the integration box, test, then commit to the main branch.
        </li>
        <li>
           Implement a version controlled <a href="SpikeSolution.html">SpikeSolution</a> using the main code base without disrupting others. Branches are more commonly seen in the distributed <a href="OpenSource.html">OpenSource</a> arena, where non mainline experiments are long lasting in order to have time to percolate out to a wide variety of test platforms.
        </li>
      </ul>
      <p>
        Other people offer reasons not to use <a href="PrivateBranches.html">PrivateBranches</a> in XP, including:
      </p>
      <ul>
        <li>
           They encourage developers to delay integrating (i.e. interfere with <a href="ContinuousIntegration.html">ContinuousIntegration</a>).
        </li>
        <li>
           They require some extra effort to use, which they may not make up for in benefits.
        </li>
        <li>
           Some <a href="VersionControl.html">VersionControl</a> systems implement them in clumsy or slow ways (see previous).
        </li>
        <li>
           They lead to the psychological sense of being separated (great way to build a team, allow everyone to work on their own bits) [this is far from trivial, it may be the most important aspect].
        </li>
      </ul>
      <hr/>
      <p>
        <em>Robert really likes the private history aspect of private branches:</em>
      </p>
      <p>
        Talk to Kent. He's been quoted lots of times as saying that he prefers to be
        able to rollback his changes every time he breaks a test unexpectedly. He
        loses a few minutes work at best. Of course, Kent probably spends a lot of
        time working in <a href="VisualAge.html">VisualAge</a> Smalltalk, which gives every developer a "private
        branch" to work in. Ditto <a href="VisualAge.html">VisualAge</a> Java, an IDE regularly quoted as being
        "the best XP IDE around".
      </p>
      <p>
        Eclipse, the VAJ replacement, goes one step further. Rather than relying on
        you committing into the repository, it does versioning for you in your
        "local history". Every body gets their own branch, and it's on their own
        machine!
      </p>
      <p>
        <em>So the rollback benefit is there even if you don't use the </em><a href="VersionControl.html">VersionControl</a> system to implement it.  Couldn't I get the same rollback benefit by just tarring my local copy of the project frequently?  Maybe the command could be run every time I run the tests. --<a href="GeorgePaci.html">GeorgePaci</a><em></em>
      </p>
      <p>
        <em> An alternative would be to use a </em><a href="DistributedVersionControl.html">DistributedVersionControl</a> system such as Darcs: in a distributed SCM environment, every working copy is at the same time a repository, and a branch from the "main" trunk (which may in fact be branched from another repository). Plus the merging and changeset-handling abilities of distributed SCMs are leaps and bounds beyond those of centralized SCMs, because they need to be.<em></em>
      </p>
      <hr/>
      <p>
        Robert also provided a handy-dandy guide to using private branches in CVS:
      </p>
      <p>
        (Caveat: command switches may not be exactly right... I'm working in <a href="ClearCase.html">ClearCase</a> these days).
      </p>
      <p>
        When you start your work, execute the following:
      </p>
      <p>
        # gets a clean copy of the trunk.
      </p>
      <code>
        cvs update -R -A -C<br/>
      </code>
      <p>
        # Tags the trunk, and sets up the branch.
      </p>
      <code>
        cvs tag -R -f -b -F MY_TAG_NAME<br/>
      </code>
      <p>
        When you are ready to integrate, on your box you simply do a commit. Then, on the integration box:
      </p>
      <p>
        # merge in any changes from the MY_TAG_NAME branch.
      </p>
      <code>
        cvs update -R -j MY_TAG_NAME<br/>
        <run integration tests><br/>
      </code>
      <p>
        # commit the changes to the trunk.
      </p>
      <code>
        cvs commit -R<br/>
      </code>
      <p>
        # Optional: remove the tag name from CVS; any branches will still exist.
      </p>
      <code>
        cvs tag -d MY_TAG_NAME<br/>
      </code>
      <p>
        <em>[Anyone want to follow this recipe, to verify the commands and switches?]</em>
      </p>
      <hr/>
      <p>
        Of course, when using <a href="PrivateBranches.html">PrivateBranches</a> in XP, you should still do XP:
      </p>
      <p>
        Start a task by updating your private branch to be whatever's in the main line.
      </p>
      <p>
        End a task by merging your private branch into the main line. (This should happen 
        at least once a day.)
      </p>
      <p>
        JohnMitchell:
        A team member creating a branch so as to avoid being part of the team is
        almost always A Very Bad Thing(tm).
      </p>
      <hr/>
      <p>
        <em>See Also:</em> <a href="XpVersionControlRoadmap.html">XpVersionControlRoadmap</a>, <a href="VersionControl.html">VersionControl</a>
      </p>
    </div>
  </body>
</html>