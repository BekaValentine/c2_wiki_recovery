<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Array Of Const
      </h1>
      <p>
        An interesting feature in modern pascal languages is the ability to pass in an array of several types into a function. 
      </p>
      <p>
        This pattern can be used in other languages... the <a href="CeeLanguage.html">CeeLanguage</a> for example has a <strong>varargs</strong> ability to pass in several parameters.  
      </p>
      <p>
        In <a href="ModernPascal.html">ModernPascal</a> it looks as follows:
      </p>
      <code>
        <strong>procedure</strong> test(a: array of const);<br/>
        <strong>var</strong> i: integer; <br/>
        <strong>begin</strong><br/>
        <strong>for</strong> i:= low(a) <strong>to</strong> high(a) <strong>do</strong> <strong>begin</strong><br/>
        <strong>case</strong> a[i].vtype <strong>of</strong><br/>
        vtAnsiString : writeln('this param is a string: ', ansistring(a[i].vAnsistring));<br/>
        vtInteger    : writeln('this param is a integer: ', a[i].vInteger);      <br/>
        vtBoolean    : writeln('this param is a boolean: ', a[i].vBoolean);            <br/>
        // ...etc<br/>
        <strong>end</strong>;    <br/>
        <strong>end</strong>;<br/>
        <strong>end</strong>;<br/>
      </code>
      <p>
        This is how to make use of it:
      </p>
      <code>
        <strong>begin</strong><br/>
        test([true, 12345, 'some string']);<br/>
        <strong>end</strong>.<br/>
      </code>
      <p>
        (And in a nice terser form:)
      </p>
      <code>
        <strong>pro</strong> test(a: ray of const);<br/>
        <strong>v</strong> i: int; <br/>
        <strong>b</strong> <strong>for</strong> i = low(a) <strong>to</strong> high(a) <strong>do</strong> <strong>b</strong><br/>
        <strong>case</strong> a[i].vtype <strong>of</strong><br/>
        vtAstr : outln('a string: ',   astr(a[i].vAstr));<br/>
        vtInt  : outln('an integer: ', a[i].vInt);      <br/>
        vtBool : outln('a boolean: ',  a[i].vBool);            <br/>
        // ...etc<br/>
        <strong>e</strong>;    <br/>
        <strong>e</strong>;<br/>
        <strong>e</strong>;<br/>
      </code>
      <p>
        In use:
      </p>
      <code>
        <strong>b</strong><br/>
        test([true, 12345, 'some string']);<br/>
        <strong>e</strong>.<br/>
      </code>
      <hr/>
      <p>
        <strong>Why it is called an array of const?</strong> 
      </p>
      <p>
        The <strong>const</strong> most likely stems from the fact that you cannot modify the values inside the function (read only), i.e. they act like read only parameters once inside the code block that is accessing this array. It does not, however, mean that you must pass only constants into the function. Similarly,  <em>const</em> means <em>read only</em> for single parameters in modern pascal also, as opposed to by reference which are labeled with <em>var</em> prefix, or by value which are prefixed with nothing.
      </p>
      <hr/>
      <p>
        See also <a href="IncludeFileParametricPolymorphism.html">IncludeFileParametricPolymorphism</a> where you do not have to use a CASE statement to handle the types,  nor does it require an array or any casts.
      </p>
    </div>
  </body>
</html>