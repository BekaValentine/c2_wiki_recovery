<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        The Mega Switch
      </h1>
      <p>
        In a place where I worked, I came to met the <a href="TheMegaSwitch.html">TheMegaSwitch</a> programming style, guys there decided that there was no need to define more than one method, or any need to define more than one class, and a need for only the following types as parameters: int, and an array of String, and a List  (in this place <a href="TheMegaSwitch.html">TheMegaSwitch</a> had around 1000 cases):
      </p>
      <code>
        class MegaSwitchGodClass{<br/>
      </code>
      <code>
        public List megaMethod(int algorithmNumber, String... arguments)<br/>
      </code>
      <code>
        switch(algorithmNumber){<br/>
      </code>
      <code>
        case:1<br/>
        //Do something with the arguments array<br/>
        break;<br/>
      </code>
      <code>
        case:2<br/>
        //Do something with the arguments array<br/>
        break;<br/>
      </code>
      <code>
        case:2<br/>
        //Need to REUSE something for case:1?<br/>
        megaMethod(1,arguments);<br/>
        break;<br/>
      </code>
      <code>
        case:N<br/>
        //Do something with the arguments array<br/>
        break;<br/>
      </code>
      <code>
        }<br/>
      </code>
      <code>
        }<br/>
      </code>
      <p>
        It is tempting to ridicule <a href="TheMegaSwitch.html">TheMegaSwitch</a>, but the big question we should be making ourselves is: What limitations in current languages made this team choose to implement <a href="TheMegaSwitch.html">TheMegaSwitch</a> instead of using many of the "services" that the language offers.
        The interesting thing here is that this approach does gives them some advantages:
      </p>
      <ul>
        <li>
          No need to refactor method names, because they do not exist and no need to worry about method choosing good names, specially if they are database queries, it can get really difficult to write method names. Example: 
        </li>
      </ul>
      <code>
        getCustomersWithNameThatEarnMoreThanThatHaveTakenLessSickDaysThanThatHaveBetweenYearsWorkingInTheCompanyAtBranch(String name, <a href="BigDecimal.html">BigDecimal</a> earn, int sickDays,int minYears, int maxYears, String companyBranchName).<br/>
      </code>
      <p>
        Now imagine all the method names required for all manipulations required a database with 100 different tables... now sometimes people just do not bother to write meaningful names and just write:
      </p>
      <code>
        getCustomers(String name, <a href="BigDecimal.html">BigDecimal</a> earn, int sickDays,int minYears, int maxYears, String companyBranchName).<br/>
      </code>
      <p>
        And when you see that being called:  getCustomers("Joseph", new <a href="BigDecimal.html">BigDecimal</a>("456.45"), 4,1, 5, "NewYork"). But that of course leaves you with lots of questions: What are the "4,1,5" numbers for? what is the <a href="BigDecimal.html">BigDecimal</a> for?
        and what if you do the same with this method:
      </p>
      <code>
        getCustomersWithNameThatEarnMoreThanThatHaveTakenMoreThanSickDaysThanThatHaveBetweenYearsThatWereBornAtTheCity(String name, <a href="BigDecimal.html">BigDecimal</a> earn, int sickDays,int minYears, int maxYears, String companyBranchName).<br/>
      </code>
      <p>
        after "compression" and "calling" looks excatly like the other:
        getCustomers("Joseph", new <a href="BigDecimal.html">BigDecimal</a>("456.45"), 4,1, 5, "NewYork") but gives completely different results... is this a secondary effect of not using <a href="SmallTalk.html">SmallTalk</a> syntax?
      </p>
      <ul>
        <li>
          No need to worry about parameter types, everything is a string. 
        </li>
        <li>
          No need to worry about the number of parameters, everything is in an array of strings
        </li>
        <li>
          No need to worry about learning object orientation techniques or patterns.
        </li>
        <li>
          It is easy to explain: "Need to add some new functionality, just add another case in the switch. Need to use existing functionality? Look for the number in the switch and call the method "megaMethod". Forgot what a number was for? reread the code (after all, most languages and developers do not allow or use really meaningful names, so, what is the difference?)
        </li>
      </ul>
      <p>
        Have you seen the <a href="TheMegaSwitch.html">TheMegaSwitch</a> in a system in your organization?  Is it a symptom that dealing with programming is much harder than we typically think, and languages do not make it easy to follow "the recommended and accepted approach"? What would you prefer to have to deal with, a system built with a <a href="TheMegaSwitch.html">TheMegaSwitch</a>, or an over engineered JEE-like "lets use a lot of patterns for anything" system?
      </p>
      <p>
        Oh, and BTW note that the <a href="TheMegaSwitch.html">TheMegaSwitch</a> was a medium sized system (around 100 tables, around 100 users) with average success, used in production, and that does its job, as good, or as bad as if it were was built in any other way.
      </p>
      <hr/>
      <p>
        Was this, more than anything, an attempt to make their language more dynamic?
      </p>
      <p>
        <em>Perhaps, but these abominations sometimes grow organically out of a single, small bit of code employing </em><a href="TheMegaSwitch.html">TheMegaSwitch</a> -- but with only a handful of CASEes that might have had some sound justification at the time, or that was created by a junior developer who didn't know any better -- and a long, long succession of subsequent developers have simply tacked on additional CASEes rather than refactor the lot.  Bad code can be like a cancer -- it starts out small and innocuous, but eventually grows to the point of killing the host.<em></em>
      </p>
      <p>
        "What would you prefer to have to deal with, a system built with a <a href="TheMegaSwitch.html">TheMegaSwitch</a>, or an over engineered JEE-like "lets use a lot of patterns for anything" system?"
      </p>
      <p>
        <em>Neither.  Both are extremes.  There's an appropriate middle ground.</em>
      </p>
      <hr/>
      <p>
        See also <a href="GodObject.html">GodObject</a>, <a href="FearOfAddingClasses.html">FearOfAddingClasses</a>
      </p>
    </div>
  </body>
</html>