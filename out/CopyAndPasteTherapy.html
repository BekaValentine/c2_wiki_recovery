<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Copy And Paste Therapy
      </h1>
      <p>
        <strong>Anti </strong><a href="CopyAndPasteProgramming.html">CopyAndPasteProgramming</a> Measures:<strong> </strong>
      </p>
      <p>
        Multiple customised copies of the same code are often <em>required</em> in games programming to get adequate speed.  What can be done about this?
      </p>
      <ul>
        <li>
           Smart inline expansions could significantly reduce need for programmers to cut and paste.
        </li>
        <li>
           A new diff-like utility could help identify (and merge) near duplications. (see <a href="CategoryDuplicationFindingTool.html">CategoryDuplicationFindingTool</a> for examples)
        </li>
        <li>
           <a href="SmallTalk.html">SmallTalk</a> development environment could encourage people to <a href="RefactorMercilessly.html">RefactorMercilessly</a>. For example, <a href="DynamicTypesEaseRefactoring.html">DynamicTypesEaseRefactoring</a>.
        </li>
        <li>
           Improved Version Control Systems that allow different forks in development to share code fixes better could also help identify duplicated code.
        </li>
        <li>
           Use macros, or even better, use C++ templates, which are really compiler-assisted macros. Templates are nice and fast at runtime if you ask the methods to be inlined, but slow at compile time. Second, <a href="OptimizeLater.html">OptimizeLater</a>. 
        </li>
      </ul>
      <hr/>
      <p>
        <strong>DNA Analogy</strong> DNA often holds multiple copies of the same (or similar) gene.  Certain genes can be clearly identified as having arisen from others by gene duplication (and change).  Multi-copy genes, e.g. for Actins (the proteins that make muscle fibres), tend to be ones for which there is high demand, and they tend to occur close to each other in the genome.  Copies seem to be continuously gained and lost.  DNA has its own built in diff-like utility that (seems to) stop duplication getting out of hand.
      </p>
      <p>
        <em>Yes; summary termination of the offending organism. Asking evolution for design advice rarely translates into something useful to human designers, who would prefer to avoid the horrid failure rates evolution experiences as a part of its "natural" function.</em>
      </p>
      <hr/>
      <p>
        <strong>Sometimes no Therapy is best...</strong>
      </p>
      <p>
        I don't see much benefit in changing this strcpy() clone on a machine without block transfers:
      </p>
      <code>
        while( *src ) <br/>
      </code>
      <ul>
        <li>
          dest++ = *src++;
        </li>
      </ul>
      <p>
        <strong>Disagreement (on this example)</strong>
      </p>
      <p>
        <em>I do see benefit in changing this to use strcpy().  It's the compiler's job to optimise the hell out of it.  If the compiler can't, change compilers.  With most compilers, you won't even incur a function call - strcpy is an intrinsic, and runs </em>'vastly<em>' faster than the above handcoded loop, especially on RISC processors.</em>
      </p>
      <p>
        Change it to use strcpy(), because strcpy is so direct it's almost a comment.  The above code has to be interpreted by the reader.  Granted, it's not tough code to interpret, but let's help the reader out wherever we can.
      </p>
      <p>
        <em>Yes.  If the compiler has a good strcpy(), let's use it.  If it's not good enough, let's have the strcpy() code </em><a href="OnceAndOnlyOnce.html">OnceAndOnlyOnce</a>.  Then we can more easily try out alternative representations of strings that allow for faster manipulation. -- Someotherone<em></em>
      </p>
      <p>
        If a machine can do block transfers of memory locations and if a strcpy() routine utilizes this then it will be faster, especially if the strcpy() routine is optimized in assembly for the particular platform (<em>which it always is, these days</em>). At the very least, the above function would look better as a macro if it's used in more than one location.
      </p>
      <hr/>
      <p>
        [<a href="CategoryRefactoring.html">CategoryRefactoring</a>, <a href="CategoryGameProgramming.html">CategoryGameProgramming</a>]
      </p>
    </div>
  </body>
</html>