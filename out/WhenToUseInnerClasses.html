<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        When To Use Inner Classes
      </h1>
      <p>
        In <a href="JavaLanguage.html">JavaLanguage</a>, classes can be either top-level or <em>inner</em>, nested within another class.  How do you decide whether a new class should be top-level or inner?
      </p>
      <p>
        Forces for making an <a href="InnerClass.html">InnerClass</a>:
      </p>
      <ul>
        <li>
           The <a href="InnerClass.html">InnerClass</a> is only relevant in the context of the outer class.  See <a href="InnerClassesAreSecondaryAbstractions.html">InnerClassesAreSecondaryAbstractions</a> for an example.
        </li>
      </ul>
      <ul>
        <li>
           The candidate class can be made private, so that only the outer class can access it.
        </li>
      </ul>
      <ul>
        <li>
           The outer class needs to act in a role as some other class or interface type, but that other type isn't prominent enough in the responsibility of the outer class to warrant extending the type directly.  (If the other type is a class, rather than an interface, the outer class may be unable to extend it.)  The inner class can serve as a <em>mask</em> or <em>facade</em> for the outer class.
        </li>
      </ul>
      <p>
        Forces against making an <a href="InnerClass.html">InnerClass</a>:
      </p>
      <ul>
        <li>
           The <a href="InnerClass.html">InnerClass</a> is large enough that it makes it hard to read the outer class.
        </li>
      </ul>
      <ul>
        <li>
           The <a href="InnerClass.html">InnerClass</a> is itself nested with an inner class.  Some humans will find it difficult to keep track of this.
        </li>
      </ul>
      <ul>
        <li>
           The <a href="InnerClass.html">InnerClass</a> can be used whether or not the outer class is used (in other words, the <a href="InnerClass.html">InnerClass</a> is a "primary abstraction").
        </li>
      </ul>
      <hr/>
      <p>
        Is there a downside to avoiding Java <a href="InnerClass.html">InnerClass</a>es in general? I only use them to simulate multiple inheritance <em>(see </em><a href="BizarreLoveTriangleInJava.html">BizarreLoveTriangleInJava</a>)<em> and function pointers </em>(actually <a href="LexicalClosure.html">LexicalClosure</a>s)<em>, and I never use anonymous or static </em><a href="InnerClass.html">InnerClass</a>es. Code without <a href="InnerClass.html">InnerClass</a>es seems more readable and maintainable.  <a href="JaredLevy.html">JaredLevy</a>
      </p>
      <p>
        See <a href="InnerClass.html">InnerClass</a>es
      </p>
      <hr/>
      <p>
        In Microsoft <a href="VisualCeePlusPlus.html">VisualCeePlusPlus</a> you have to use <a href="InnerClass.html">InnerClass</a>es when you want to imitate the functionality of PartialTemplateSpecialization, which Microsoft have not implemented but which is necessary for many of the new C++ idioms.
      </p>
      <code>
        /////////example of using inner classes for PTS in <a href="CeePlusPlus.html">CeePlusPlus</a> ///////////<br/>
        template <class S, class T><br/>
        struct Bar<br/>
        {<br/>
        template <class U><br/>
        struct Foo<br/>
        {<br/>
        static int f(S s, T t){return 0;}<br/>
        };<br/>
        template <><br/>
        struct Foo<int><br/>
        {<br/>
        static int f(S s, T t){return 1;}<br/>
        };<br/>
        typedef Foo<T> Imp;<br/>
        };<br/>
        template <class S, class T><br/>
        int foo(S s, T t)<br/>
        {<br/>
        return Bar<S,T>::Imp::f(s,t);<br/>
        }<br/>
        ////end of example of MSVC pseudo partial template spec. using inner classes /////////<br/>
      </code>
      <p>
        Unfortunately I don't think the resulting code is strictly legal, but QuasiC++ aka MSVC seems happy enough with it.
      </p>
      <p>
        <a href="BillWeston.html">BillWeston</a>
      </p>
    </div>
  </body>
</html>