<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Bit Field
      </h1>
      <p>
        Back over on <a href="BooleanRepresentation.html">BooleanRepresentation</a>, <a href="DaveHarris.html">DaveHarris</a> wrote that 
        <em>Using 1 for true means that true can be stored</em>
        <em>in a 1-bit </em><a href="BitField.html">BitField</a><em></em>
      </p>
      <p>
        Here's another C idiom for you -- you must be careful when coding for 1-bit bitfields, because they have a portable range of 0, since the compiler may use either signed or unsigned bitfields by default.
      </p>
      <p>
        I quote from <a href="WritingSolidCode.html">WritingSolidCode</a>, by <a href="SteveMaguire.html">SteveMaguire</a>:
        "The bit field does have a non-zero state -- you just don't know what it is. The value can be either -1 or 1 [...]. You can safely use both states of the bit field if you restrict all your comparisons to 0."
      </p>
      <p>
        --<a href="KatyMulvey.html">KatyMulvey</a>
      </p>
      <hr/>
      <p>
        Therefore, always explicitly mark 1-bit bit fields as unsigned:
      </p>
      <code>
        struct lots_o_flags<br/>
        {<br/>
        unsigned lottery_won : 1;<br/>
        unsigned bridge_closed : 1;<br/>
        unsigned some_other_flag : 1;<br/>
        };<br/>
      </code>
      <p>
        Note that signed bit-fields might not even be able to contain -1,
        this is true in computers that use 1-complement for representing signed int's.
        A signed bit-field that can contain 1 is a bug in the compiler.
      </p>
      <p>
        -- <a href="StephanHouben.html">StephanHouben</a>
      </p>
      <hr/>
      <p>
        <a href="BitField.html">BitField</a>s also have the problem that the issue of MSB first or LSB first is undefined.  (See <a href="ErlangBitSyntax.html">ErlangBitSyntax</a> for more).
      </p>
      <p>
        I always use #define to make bitmasks when I need to do bit-frobbing.
      </p>
      <hr/>
      <p>
        <a href="CategoryCee.html">CategoryCee</a> <a href="CategoryJargon.html">CategoryJargon</a>
      </p>
    </div>
  </body>
</html>