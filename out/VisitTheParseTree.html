<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Visit The Parse Tree
      </h1>
      <p>
        <strong>Context:</strong> 
      </p>
      <p>
        You've got a big chunk of data to parse. Following the advice of <a href="ParseUsingGrammars.html">ParseUsingGrammars</a> and AlwaysBuildAParseTree, you've used a parser 
        generator (for example, <a href="AntlrTranslatorGenerator.html">AntlrTranslatorGenerator</a>), built a BNF and gone to town. 
      </p>
      <p>
        <strong>Problem:</strong>
      </p>
      <p>
        What now ? Now that you've got all the information in memory, in a nice form, how do you actually do something with it ? 
      </p>
      <p>
        <strong>Forces:</strong> 
      </p>
      <p>
        <em>Implementation complexity</em>. Oh my god. Haven't you written enough code already ? Do you really need to implement a lot more code. This investment in infrastructure may be a long term gain, may have helped you UnderstandContext and it will <a href="EncourageExperimentation.html">EncourageExperimentation</a> but ... you need to see something running and doing something soon. 
      </p>
      <p>
        <em>Extendability</em>.
      </p>
      <p>
        In order for an investment in infrastructure to pay off, it needs to be flexible (and efficient). that's why you went to the trouble of defining a
        BNF and building a parse tree, right ? 
      </p>
      <p>
        <strong>Solution: </strong>
      </p>
      <p>
        Use visitors to perform tasks. Implement the full <a href="DoubleDispatch.html">DoubleDispatch</a> version 
        from the start (you're going to need it and, at the start, it's no problem 
        to build it in) and do all your processing via visitors. You'll be amazed at how elegant the resulting code is (and how easy it is to extend). 
      </p>
      <p>
        <strong>Related Patterns:</strong>
      </p>
      <p>
        <a href="ParsingPatterns.html">ParsingPatterns</a>, <a href="EncourageExperimentation.html">EncourageExperimentation</a>, <a href="VisitorPattern.html">VisitorPattern</a>
      </p>
      <hr/>
      <p>
        Compiler experts often don't follow this advice, because they don't
        build parse trees.  Building parse trees is a bit of overhead, and
        the fastest compilers don't.
        But unless you are pretty sure you won't need
        them, you are better off building parse trees because compilers
        based on parse trees are a lot easier to understand (in my opinion).  
        So, I agree that this pattern is the one you should use by default.
        -<a href="RalphJohnson.html">RalphJohnson</a>
      </p>
      <hr/>
      <p>
        Please clarify how you see <a href="DoubleDispatch.html">DoubleDispatch</a> working with the visitor. I can imagine at least two implementations.
      </p>
      <p>
        Personally I feel a better question would be how do you implement the Visitor pattern <em>without</em> full <a href="DoubleDispatch.html">DoubleDispatch</a> working?
      </p>
      <p>
        <em>Odd.  The </em><a href="VisitorPattern.html">VisitorPattern</a> does not require <a href="DoubleDispatch.html">DoubleDispatch</a>.  I've never used <a href="DoubleDispatch.html">DoubleDispatch</a> to parse or process data.  I've never used <a href="DoubleDispatch.html">DoubleDispatch</a> to parse or interpret code.<em></em>
      </p>
      <p>
        <em>Of what value is </em><a href="DoubleDispatch.html">DoubleDispatch</a> in this context? -- <a href="JeffGrigg.html">JeffGrigg</a><em></em>
      </p>
    </div>
  </body>
</html>