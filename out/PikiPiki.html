<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Piki Piki
      </h1>
      <p>
        In a beautiful meta-example of <a href="WikiNature.html">WikiNature</a>, people have evolved <a href="PikiPiki.html">PikiPiki</a> into <a href="MoinMoin.html">MoinMoin</a>, with lots more features.
      </p>
      <ul>
        <li>
           does this mean <a href="PikiPiki.html">PikiPiki</a> is deprecated and we should use <a href="MoinMoin.html">MoinMoin</a> instead? -- <a href="PhilJones.html">PhilJones</a>
        </li>
        <li>
           YES.
        </li>
      </ul>
      <hr/>
      <p>
        In addition, <a href="DiamondWiki.html">DiamondWiki</a> is based on <a href="PikiPiki.html">PikiPiki</a>
      </p>
      <hr/>
      <p>
        <a href="PikiPiki.html">PikiPiki</a> is <a href="MartinPool.html">MartinPool</a>'s reimplementation of <a href="WikiWikiWeb.html">WikiWikiWeb</a> in <a href="PythonLanguage.html">PythonLanguage</a>, released under the <a href="GnuGeneralPublicLicense.html">GnuGeneralPublicLicense</a>.
      </p>
      <p>
        The source is available at <a href="http://sourcefrog.net/projects/piki/.">http://sourcefrog.net/projects/piki/.</a> 
      </p>
      <p>
        <a href="PikiPiki.html">PikiPiki</a> now comes with installation instructions and looks much prettier!
      </p>
      <p>
        I wanted to write this software because:
      </p>
      <ul>
        <li>
           I wanted to compare a Python version to a Perl or Java implementation, in terms of code quality and performance.
        </li>
        <li>
           It's fun to work on a small and productive project.
        </li>
        <li>
           Everybody else seems to be building one. :-)
        </li>
      </ul>
      <p>
        Distinguishing features:
      </p>
      <ul>
        <li>
           Tab is never required as a formatting character, because it's hard to type into many browsers. The markup codes are pretty similar.
        </li>
        <li>
           Data is stored in plain text files, not in a database. This reduces contention between concurrent users and is more in the spirit of a quick solution.
        </li>
        <li>
           Full-text search is quite fast, and doesn't lock out updates.
        </li>
        <li>
           I don't do versioning - I think Wiki is not meant to be a document-management system.
        </li>
        <li>
           <a href="PikiPiki.html">PikiPiki</a> offers an index of all titles, and an index of all words occurring in titles.
        </li>
      </ul>
      <p>
        I'd like to solve the <a href="ReverseLinkDisabled.html">ReverseLinkDisabled</a> problem, perhaps by distracting <a href="SpamBot.html">SpamBot</a>s to a <a href="SpiderTrap.html">SpiderTrap</a>.
      </p>
      <p>
        I've just installed it at <a href="MincomLtd.html">MincomLtd</a> as a <a href="ProjectWiki.html">ProjectWiki</a>: it's going pretty well, but it takes a while to get people used to it. (More on this later, but see the discussion in <a href="ProjectWiki.html">ProjectWiki</a>.)
      </p>
      <hr/>
      <p>
        I look back at this code now a year later and I still like it a lot. I think in some way it is the closest I have come to <a href="WabiSabi.html">WabiSabi</a> in code. -- <a href="MartinPool.html">MartinPool</a>
      </p>
      <hr/>
      <p>
        There was formerly a Japanese-localized version of <a href="PikiPiki.html">PikiPiki</a>, derived from <a href="MoinMoin.html">MoinMoin</a>, but it no longer exists.
      </p>
      <p>
        The only change to <a href="MoinMoin.html">MoinMoin</a> needed by the Japanese version was to insert a META tag to specify the charset. I was amazed myself. :)
      </p>
      <hr/>
      <p>
        Re: <a href="SpamBot.html">SpamBot</a>s.
      </p>
      <p>
        Wiki currently denies access to sites that fetch stuff too quickly. Seems to work well, as the <a href="SpamBot.html">SpamBot</a>s can't tell the difference between a normal page and a page with nothing but a nasty message on it.
      </p>
      <p>
        Have you considered using a "submit" button, as described on the <a href="ReverseLinkDisabled.html">ReverseLinkDisabled</a> page?
      </p>
      <p>
        If you're really in a bad mood, you could build a <a href="SpiderTrap.html">SpiderTrap</a>:
        See <a href="http://www.turnstep.com/Spambot/harassment.html">http://www.turnstep.com/Spambot/harassment.html</a> and <a href="http://www.monkeys.com/wpoison/">http://www.monkeys.com/wpoison/</a> [link is dead. according to archive.org, it's been dead since 2002. Happily there are cached versions at archive.org]
      </p>
      <p>
        <em>I thought I'd probably use some combination of a </em><a href="SpiderTrap.html">SpiderTrap</a> and a YouAreDominatingMe message. The current working version is not public and so doesn't have to worry.<em></em>
      </p>
      <hr/>
      <p>
        <em>Thanks for making the source available, Martin (and thanks for advancing me a copy after my plea). BTW, it was easy as Py to install -- </em><a href="TimVoght.html">TimVoght</a><em> </em>
      </p>
      <hr/>
      <p>
        Can somebody help fix what I think is a <a href="PikiPiki.html">PikiPiki</a> bug? Verbatim mode ( three open braces in a row, text, three closed braces in a row ) doesn't seem to handle dashes correctly. It expands dashes to bars (HTML horizontal rules) instead of leaving them as ASCII dashes. Can someone point me in the right direction? My glance at the Python code didn't reveal any obvious defects.
      </p>
      <hr/>
      <p>
        The below code change seems to make <a href="PikiPiki.html">PikiPiki</a> handle dashes properly in verbatim mode. I made <a href="PikiPiki.html">PikiPiki</a> use a different regular expression scanner when in preformatted mode. If I knew Python, I could make a cleaner fix, but this seems to work.
      </p>
      <code>
        $ diff piki.cgi piki_old.cgi<br/>
      </code>
      <ol>
        <li>
          ,413d411
        </li>
      </ol>
      <code>
        <       # When text is in <PRE>formatted mode, don't substitute<br/>
        <       # HTML horizontal rules for dashes.<br/>
      </code>
      <ol>
        <li>
          ,436d423
        </li>
      </ol>
      <code>
        <         scan_pre = re.compile(<br/>
        <             r"(?:(?P<emph>'{2,3})"<br/>
        <             + r"|(?P<ent>[<>&])"<br/>
        <             + r"|(?P<word>\b(?:[A-Z][a-z]+){2,}\b)"<br/>
        <             + r"|(?P<url>(http|ftp|nntp|news|mailto)\:[^\s'\"]+\S)"<br/>
        <             + r"|(?P<email>[-\w._+]+\@[\w.-]+)"<br/>
        <             + r"|(?P<li>^\s+\*)"<br/>
        <             + r"|(?P<pre>(\{\{\{|\}\}\}))"<br/>
        <             + r"|(?P<macro>\[\[(<a href="TitleSearch.html">TitleSearch</a>|<a href="FullSearch.html">FullSearch</a>|WordIndex"<br/>
        <                             + r"|TitleIndex|<a href="RecentChanges.html">RecentChanges</a>|<a href="GoTo.html">GoTo</a>)\]\])"<br/>
        <             + r")")<br/>
      </code>
      <ol>
        <li>
          ,452c437
        </li>
      </ol>
      <code>
        <                 print re.sub(scan_re, self.replace, line)<br/>
        <             else:<br/>
        <                 print re.sub(scan_pre, self.replace, line)<br/>
        ---<br/>
        >             print re.sub(scan_re, self.replace, line)<br/>
      </code>
      <hr/>
      <p>
        <em>Hi, does this do what you want? -- </em><a href="AndreasMeyer.html">AndreasMeyer</a><em></em>
      </p>
      <code>
        $ diff piki.cgi piki.cgi.new<br/>
      </code>
      <ol>
        <li>
          c416
        </li>
      </ol>
      <code>
        <             + r"|(?P<rule>-{4,})"<br/>
        ---<br/>
        >             + r"|(?P<rule>^-{4,})"<br/>
      </code>
      <hr/>
      <p>
        The above looks like it will only convert a line of dashes to a horizontal rule
        if the line of dashes starts the beginning of a line. I don't think this does
        what I want, because preformatted text could also have a string of dashes that
        starts at the beginning of the line.
      </p>
      <hr/>
      <p>
        Dashes isn't the problem, but anything inside braces works like outside; try to insert any text inside double quotes and it will be italicized. This hopefully will fix the problem:
      </p>
      <code>
        def _pre_repl(self, word):<br/>
        if word == '{{{' and not self.in_pre:<br/>
        self.in_pre = 1<br/>
        return '<pre>'<br/>
        elif self.in_pre:<br/>
        self.in_pre = 0<br/>
        return '</pre>'<br/>
        else:<br/>
        return word<br/>
      </code>
      <code>
        def replace(self, match):<br/>
        for type, hit in match.groupdict().items():<br/>
        if hit:<br/>
        if (not self.in_pre or<br/>
        self.in_pre and hit == '}}}'):<br/>
        return getattr(self, '_' + type + '_repl')(hit)<br/>
        else: return hit<br/>
        else:<br/>
        "Can't handle match " + repr(match)<br/>
      </code>
      <code>
        def print_html(self):<br/>
        # For each line, we scan through looking for magic<br/>
        # strings, outputting verbatim any intervening text<br/>
        scan_re = re.compile(<br/>
        r"(?:(?P<emph>'{2,3})"<br/>
        + r"|(?P<ent>[<>&])"<br/>
        + r"|(?P<word>\b(?:[A-Z][a-z]+){2,}\b)"<br/>
        + r"|(?P<rule>-{4,})"<br/>
        + r"|(?P<url>(http|ftp|nntp|news|mailto)\:[^\s'\"]+\S)"<br/>
        + r"|(?P<email>[-\w._+]+\@[\w.-]+)"<br/>
        + r"|(?P<li>^\s+\*)"<br/>
        + r"|(?P<pre>(\{\{\{|\}\}\}))"<br/>
        + r"|(?P<macro>\[\[(<a href="TitleSearch.html">TitleSearch</a>|<a href="FullSearch.html">FullSearch</a>|WordIndex"<br/>
        + r"|TitleIndex|<a href="RecentChanges.html">RecentChanges</a>|<a href="GoTo.html">GoTo</a>)\]\])"<br/>
        + r")")<br/>
        blank_re = re.compile("^\s*$")<br/>
        bullet_re = re.compile("^\s+\*")<br/>
        indent_re = re.compile("^\s*")<br/>
        eol_re = re.compile(r'\r?\n')<br/>
        raw = self.raw.expandtabs()<br/>
        for line in eol_re.split(raw):<br/>
        if not self.in_pre:<br/>
        if blank_re.match(line):<br/>
        print '<p>'<br/>
        continue<br/>
        indent = indent_re.match(line)<br/>
        print self._indent_to(len(indent.group(0)))<br/>
        print re.sub(scan_re, self.replace, line)<br/>
        if self.in_pre: print '</pre>'<br/>
        print self._undent()<br/>
      </code>
      <hr/>
      <p>
        See <a href="WikiWikiClone.html">WikiWikiClone</a> <a href="MyConfusedIdeaOfWiki.html">MyConfusedIdeaOfWiki</a>
      </p>
      <hr/>
      <hr/>
      <p>
        <a href="CategoryWikiImplementation.html">CategoryWikiImplementation</a>
      </p>
    </div>
  </body>
</html>