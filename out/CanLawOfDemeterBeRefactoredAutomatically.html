<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Can Law Of Demeter Be Refactored Automatically
      </h1>
      <p>
        Thinking a bit about <a href="LawOfDemeter.html">LawOfDemeter</a> and <a href="LawOfDemeterExample.html">LawOfDemeterExample</a> I've come to think that existing code can be refactored automatically to fulfill <a href="LawOfDemeter.html">LawOfDemeter</a>: 
      </p>
      <p>
        Push all calls of the form x.foo().bar() into x.fooBar() moving arguments and parameters as needed.
      </p>
      <p>
        Is this true?
      </p>
      <p>
        If is is true, then the usefulness of the <a href="LawOfDemeter.html">LawOfDemeter</a> is questionable, because it is just a simple code-transformation like loop-unrolling, that might or migt not be done by a compiler/refactoring browser, but will not help the programmer/reader any bit. 
      </p>
      <p>
        <em>That was the whole point of the </em>DemeterProject (they developed tools to perform such automated refactoring), which is where the <a href="LawOfDemeter.html">LawOfDemeter</a> came from in the first place. -- <a href="JonathanTang.html">JonathanTang</a><em></em>
      </p>
      <p>
        Demeter has raised what we would know here as a <a href="CodeSmell.html">CodeSmell</a> to the level of a law. I take this clear overstatement to mean that the smell and its solution was the strongest pattern found by the Demeter project. Their law is to me only a hint. As such it is best applied with reason. When x.foo().bar() is the best expression of my intent then I am happy with it. When x.fooBar() is better I usually find that x was well suited to take on the fooBar() responsibility and might even have a better name for it. This is a judgement, best left to humans, though mechanical assist with specific refactorings is always appreciated. -- <a href="WardCunningham.html">WardCunningham</a>
      </p>
      <p>
        Yes, but isn't this the case with all laws?  The whole point is to produce working, maintainable, reasonably efficient software.  If we have to break a zillion best practices to do so, why not?  Demeter is no different from <a href="GotoConsideredHarmful.html">GotoConsideredHarmful</a> or <a href="SingletonsAreEvil.html">SingletonsAreEvil</a> or <a href="LongFunctions.html">LongFunctions</a>: it's something to be aware of, not an absolute proscription.
      </p>
      <p>
        <a href="TerryPratchett.html">TerryPratchett</a> said it best: "The whole reason we have rules is so you <em>think</em> before you break them."  -- <a href="JonathanTang.html">JonathanTang</a>
      </p>
      <p>
        If you believe the solution to the <a href="LawOfDemeter.html">LawOfDemeter</a> is automatic combination of such methods, then automatic refactoring makes sense. If you believe the point of the <a href="LawOfDemeter.html">LawOfDemeter</a> is to make you think about <a href="TellDontAsk.html">TellDontAsk</a>, then automatic methods cannot help you. --francis
      </p>
      <p>
        I'm not sure this representation of the Law is accurate. With x.foo().bar(), you are calling a method on a return value. A return value is "a toy that was given to you", and the Law of Demeter allows manipulating such objects. What it forbids, is x.foo.bar(), reaching inside another object (x) and doing something with its "toys" (foo). --WillMacKay
      </p>
      <hr/>
      <p>
        <a href="CategoryRefactoring.html">CategoryRefactoring</a>
      </p>
    </div>
  </body>
</html>