<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Cv Wiki
      </h1>
      <p>
        <a href="CvWiki.html">CvWiki</a> was an early <a href="WikiWikiClone.html">WikiWikiClone</a>. Once the only <a href="WikiWikiClone.html">WikiWikiClone</a> with functioning <a href="TransClusion.html">TransClusion</a>, <a href="BackLink.html">BackLink</a>s and <a href="WayBackMode.html">WayBackMode</a>, but there are lots of better ones these days. Try <a href="ZwiKi.html">ZwiKi</a> ...
      </p>
      <hr/>
      <p>
        <a href="CvWiki.html">CvWiki</a> is a <a href="WikiWikiClone.html">WikiWikiClone</a> of Ward's code that 
      </p>
      <ul>
        <li>
           uses flat files for text, 
        </li>
        <li>
           supports direct transclusion of external web pages
        </li>
        <li>
           stores backlinks with their pages rather than searching for them (so backlinks pop up immediately)
        </li>
        <li>
           and is fully integrated with CVS so you've got 
        </li>
        <li>
           unlimited undo, 
        </li>
        <li>
           no edit collisions, and, best of all
        </li>
        <li>
           <a href="WayBackMode.html">WayBackMode</a>. 
        </li>
      </ul>
      <p>
        There are several smaller twiddles in it too, like debugged <a href="LinkPattern.html">LinkPattern</a>s and EmphasisPatterns. But it's all backward-compatible with the existing wikibase. 
      </p>
      <p>
        A large amount of this clone is still under Ward's copyright, but unless Ward has objections you should be able to pick up a copy of Pete's hack at <a href="http://home.connectnet.com/peter/CVWiki.gz">http://home.connectnet.com/peter/CVWiki.gz</a> (<a href="BrokenLink.html">BrokenLink</a>) (alternate link: <a href="http://home.san.rr.com/merel/CVWiki.gz">http://home.san.rr.com/merel/CVWiki.gz</a> (Also <a href="BrokenLink.html">BrokenLink</a>))
        Pete's parts of this are all under LGPL.
      </p>
      <p>
        Be warned that installing the thing properly will require you to install CVS (see <a href="http://www.cvshome.org)">http://www.cvshome.org)</a> which is free but requires a little expertise. And <a href="CvWiki.html">CvWiki</a> comes with zero documentation at the moment.
      </p>
      <p>
        <em></em><a href="PeterMerel.html">PeterMerel</a><em></em>
      </p>
      <hr/>
      <p>
        I want to try out CVWiki. I have Perl and CVS installed, but get tons of errors when I try the naive thing (running cvwiki from a command line to see what happens). I am assuming that if I grovel through code long enough, I might get it to work. Still, if someone has a reasonable list of the things that need editing to get this to work, that would be helpful.
      </p>
      <p>
        -- <a href="mailto:laird@newscorp.com">mailto:laird@newscorp.com</a>
      </p>
      <p>
        Okay, being the cause of some angst, here's the basics; others ought to fill in the difficulties they've had with each step:
      </p>
      <ul>
        <li>
           Get CVS 1.9.28 or higher. 
        </li>
        <li>
           Get Perl 5.004 or higher. 
        </li>
        <li>
           Get an httpd and configure it to know where the cvwiki CGI script lives. Two that I know work over NT 4.0 are the Xitami (from <a href="http://www.nonags.com)">http://www.nonags.com)</a> and Netscape Suitespot servers; I have it working over apache on NT now too. <em>Since Pieter Hintjens has been such a good sport about supporting the Xitami community for so many years (see </em><a href="http://www.imatix.com/html/xiusers.htm">http://www.imatix.com/html/xiusers.htm</a> ) I think it's only fair that we pull Xitami from iMatix at <a href="http://www.imatix.com/products.htm">http://www.imatix.com/products.htm</a> <em></em>
        </li>
        <li>
           set the appropriate values for the variables at the start of the <a href="CvWiki.html">CvWiki</a> script. In particular, set the directory <a href="CvWiki.html">CvWiki</a> will use as its CVS workarea <em>(this variable is </em>DataBase<em>; set it to the full path for the CVS module you check out in the next step)</em>
        </li>
        <li>
           Create that directory in the CVS repository. The manual explainshow - you need to end up with a directory that you actually checked out of CVS, not just one you used for <import> or <add>.
        </li>
      </ul>
      <p>
        <em>I'm trying to set up a departmental </em><a href="CvWiki.html">CvWiki</a>.  I don't know much about CVS and I don't know how to accomplish the above step.  Could someone provide example CVS commands?<em></em>
      </p>
      <ul>
        <li>
           light blue touch paper and stand well back.
        </li>
      </ul>
      <p>
        I get good use from this tool, but it's not free of Ward's copyright, I make no money from it, and as you can read in its source I neither support nor warranty it for any use at all. Use strictly at your own risk. -- <a href="PeterMerel.html">PeterMerel</a>
      </p>
      <hr/>
      <p>
        I wrote a Wiki Clone based on <a href="CvWiki.html">CvWiki</a> running at <a href="http://www2.tunes.org/cgi-bin/TunesWiki">http://www2.tunes.org/cgi-bin/TunesWiki</a> (New address: <a href="http://cliki.tunes.org/)">http://cliki.tunes.org/)</a>
      </p>
      <p>
        I'd be glad to help someone who wants to set up <a href="CvWiki.html">CvWiki</a>.  It was hard enough for me, I don't want anyone else to have to go through that.  CVS 1.9 is buggy; <a href="CvWiki.html">CvWiki</a> requires 1.9.26 or later.
      </p>
      <p>
        Before you can use <a href="WayBackMode.html">WayBackMode</a>, you have to:
      </p>
      <ol>
        <li>
           Create the directory for the CVWiki database.
        </li>
        <li>
           Put this empty directory in the repository.  Make sure the directory in the repository is the same name as the directory for the database, and only one level deep (not 2, with the parent directory name duplicating the subdirectory name).
        </li>
        <li>
           Remove the directory you made.  The canonical version remains in the repository.
        </li>
        <li>
           Check out the same directory, making sure it checks out in the same location it was at before.  The only difference is that there will be a CVS/ subdirectory with some files in it.
        </li>
        <li>
           Test adding a page to the wiki database.  Keep a close eye on the web server logs for CVS errors.  The CGI wiki script must run as a user that has write permission to: the repository (using CVS), and also the checked out version of the wiki database.  
        </li>
      </ol>
      <p>
        -- <a href="mailto:dem@tunes.org">mailto:dem@tunes.org</a>
      </p>
      <hr/>
      <p>
        Is there a <a href="CvWiki.html">CvWiki</a> running anywhere that one could check out?  The Tunes one appears not to connect to anything.  -- <a href="RonJeffries.html">RonJeffries</a>
      </p>
      <p>
        <em>It's there, it just seems to be down the end of a long narrow pipe. I stuck a transclusion example on its front page for you to play with.</em> -- <a href="PeterMerel.html">PeterMerel</a>
      </p>
      <hr/>
      <p>
        I'm running (internal to our firewall, alas) a modified version of <a href="CvWiki.html">CvWiki</a>.
        Some of the interesting changes include:
      </p>
      <ul>
        <li>
           uses RCS rather than CVS (because it was convenient)
        </li>
        <li>
           the revision history display adds a hyperlink to show diffs at each revision
        </li>
        <li>
           adds an Append Text link alongside <a href="EditText.html">EditText</a> (accepts new text, which is appended to prior content)
        </li>
        <li>
           adds <a href="RecentChanges.html">RecentChanges</a> at the top rather than the bottom
        </li>
      </ul>
      <p>
        As well as more minor tweaks and fixes.  The basic notion of the revision
        controlled wiki is a great addition; I also find the diffs addition
        addictive (OK, <a href="RecentChanges.html">RecentChanges</a> says it's changed but <strong>where</strong>!) and
        personally use that more than <a href="WayBackMode.html">WayBackMode</a> <em>per se</em>. I just added the
        Append feature recently, really motivated by a desire to have a mail-to-wiki
        gateway (a little forwarder script extracts a <a href="WikiName.html">WikiName</a> from a mail Subject,
        and invokes a wiki append to that page via http),  but it seems to have
        potential for <a href="ThreadMode.html">ThreadMode</a> discussions, notably avoiding stepped-on edits, and
        in contexts where some users are not secure enough in wiki lore to edit
        someone else's comments.
      </p>
      <p>
        I'd be glad to mail it to interested parties.  -- <a href="JimPerry.html">JimPerry</a>
      </p>
      <p>
        I think I like the sound of most of that except the thready stuff, which it seems to me might detract from the <a href="WikiNature.html">WikiNature</a>. RCS vs. CVS makes no difference unless you're versioning your wiki along with your project, in which case CVS is handy. I like the diff idea - should like to see it in action before I could opine on whether I like it better or worse than <a href="WayBackMode.html">WayBackMode</a>. I guess I can think of good uses of both. -- <a href="PeterMerel.html">PeterMerel</a>
      </p>
      <p>
        For better or worse we're not seeing much wiki-ish interactivity, but it is
        proving useful as a repository, hence the mail-gateway/append experiment.
        YMMV.	The diff thing is orthogonal to <a href="WayBackMode.html">WayBackMode</a>; the word "modified" on
        each revision listed is linked to the diffs at that rev (from the previous),
        the date is still linked to the <a href="WayBackMode.html">WayBackMode</a> of that page at that rev.
        -- <a href="JimPerry.html">JimPerry</a>
      </p>
      <hr/>
      <p>
        <strong>Concurrency problem.</strong> <a href="CvWiki.html">CvWiki</a> runs on Solaris as nobody. The user edits and clicks on Save. <a href="CvWiki.html">CvWiki</a> creates a lock directory /tmp/wiki.  The user decides to go back, edit for a second, and clicks on Save again. <a href="CvWiki.html">CvWiki</a> runs a second time but finds that /tmp/wiki still exists. Since the first run never removed the lock directory <a href="CvWiki.html">CvWiki</a> can't create a new one and aborts. 
      </p>
      <p>
        How can this concurrency conflict be resolved? (It's a pain to remove the /tmp/wiki directory "by hand" because I don't own it, i.e. I have to do it from inside the script). -- <a href="FrankGerhardt.html">FrankGerhardt</a>
      </p>
      <p>
        <em>The behaviour of CGI scripts depends on the http server you use. Some servers will kill a script before it finishes, leaving lock files hanging around indefinitely. I've run </em><a href="CvWiki.html">CvWiki</a> successfully with both the Xitami and Netscape SuiteSpot servers over NT. I haven't tried it on Solaris, but I'd suggest SuiteSpot and Apache are worth trying if your present server is killing scripts before locks can be removed.<em></em>
      </p>
      <p>
        <em>Alternatively you could play with Perl SIGHANDLERs in the script to cause the locks to be removed on a kill - if you do this and it works then I'd be happy to integrate your changes back into my otherwise unsupported version of the code ...</em> -- <a href="PeterMerel.html">PeterMerel</a>
      </p>
      <hr/>
      <p>
        If you are using a linux system change the 1st line to #!/usr/bin/perl or wherever perl is located.
      </p>
      <p>
        I found this made digging out problems a little easier:
        create a script (I called mine wrap.pl).
      </p>
      <code>
        #!/usr/bin/perl<br/>
        system 'perl /pathname/CVWiki.pl',@args;<br/>
      </code>
      <p>
        For some reason from perl the errors do not get logged but from a script they do. 
      </p>
      <p>
        You can also call the script from the command line to get it up and running.
      </p>
      <p>
        Now someone who is better at HTTP and perl might post a series of commands
        that would emulate a call from a browser to test various Wiki calls.
      </p>
      <p>
        Also if I remove the "perl" in the wrap.pl, and just tries to execute
        the script it fails. Don't know why. Wiki.pl runs right next to it OK.
      </p>
      <p>
        If someone has an idea of how to add access control lists.
      </p>
      <ul>
        <li>
           <em>Set it up to use cookies.</em>
        </li>
      </ul>
      <p>
        I would like to have a specialised wiki for work ( for process documents etc. ),
        and want to restrict it to workers while keeping it on the WorldsWildWeb.
      </p>
      <p>
        People should be able to make tools that can help you manage the repository.
        For example to delete a page. (I wonder what happens when you do cvs delete and
        someone tries to recreate the page?)
      </p>
      <p>
        Also can you create the page WorkingTheWayBack?
      </p>
      <p>
        Finally: If you are using CVS and don't want to risk corrupting your
        repository, or intermingle wiki with other stuff here are the steps to use
        another repository ( and not have to screw aroung with CVSROOT ).
      </p>
      <ol>
        <li>
           Define a variable in the script called $Repository, set it to the directory you want to store things in. <em>$Repository='therepositry';</em>
        </li>
        <li>
           Login as the user ( or su user ) that httpd runs the script under. With  Apache that generally defaults to 'nobody'.
        </li>
        <li>
           Create the repository directory.
        </li>
        <li>
           Cd to that directory. Run the command: cvs -d $Repository init
        </li>
        <li>
           Create the $DatabaseName directory.
        </li>
        <li>
           cd to $DatabaseName
        </li>
        <li>
           cvs -d $Repository import $DatabaseName'as a local directory' vendor version. Make something up for vendor. The first character of version must be alphabetic.
        </li>
        <li>
           cd ..
        </li>
        <li>
           cvs -d $Repository co $DatabaseName'as a local directory'.
        </li>
        <li>
           Look in $DatabaseName to see if the folder CVSROOT is there. If not you've made errors.
        </li>
        <li>
           The nastiest part:edit the CVWiki.pl script ($Repository should  already be there) put '$cvs="cvs -d $Repository"' at the top. Every time you see a string 'cvs somecommand' change it to '$cvs somecommand'. For example change cvs import to $cvs -d $Repository import.
        </li>
        <li>
           Sit back enjoy.
        </li>
      </ol>
      <p>
        PS Where are the <a href="UnitTest.html">UnitTest</a>s for wiki.pl and CVWiki.pl?
      </p>
      <ul>
        <li>
           <em></em><a href="UnitTest.html">UnitTest</a>s? We don't need no steenkeeng <a href="UnitTest.html">UnitTest</a>s!!<em></em>
        </li>
      </ul>
      <p>
        PPS Sorry for the messiness of my contribution. I will clean it up tonight.
      </p>
      <p>
        -- <a href="ThaddeusOlczyk.html">ThaddeusOlczyk</a>
      </p>
      <hr/>
      <p>
        What's the difference between this page and <a href="http://c2.com/cgi/wikibase?CvWiki?">http://c2.com/cgi/wikibase?CvWiki?</a>
      </p>
      <hr/>
      <p>
        <a href="CategoryWikiImplementation.html">CategoryWikiImplementation</a>
      </p>
    </div>
  </body>
</html>