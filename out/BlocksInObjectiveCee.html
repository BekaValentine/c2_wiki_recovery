<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Blocks In Objective Cee
      </h1>
      <p>
        Besides the TaskMaster/PortableObjectCompiler approach to implementing Blocks in <a href="ObjectiveCee.html">ObjectiveCee</a>, there is the possibility of an interpreter for a subset of <a href="ObjectiveCee.html">ObjectiveCee</a>. <a href="JoeOsborn.html">JoeOsborn</a> has implemented such an interpreter, which can be downloaded from <a href="http://homepage.mac.com/being/">http://homepage.mac.com/being/</a> as part of OSFoundation.
      </p>
      <p>
        Even though <a href="ObjectiveCee.html">ObjectiveCee</a> has no language support for blocks, various parties have undertaken to add this missing functionality(along with <a href="HigherOrderMessaging.html">HigherOrderMessaging</a>) to the language, either purely as objects(a la OSFoundation, or from MartinHaeckers work) or as an additional preprocessor(as in ObjCBrowser, a code editor for <a href="ObjectiveCee.html">ObjectiveCee</a> based on Smalltalk's Browser object).
      </p>
      <ul>
        <li>
           <strong>OSFoundation</strong>
        </li>
      </ul>
      <p>
        Currently, the parsing performed by OSFoundation's OSBlockParser is using the OSDepthScanner class, which is implemented using Foundation's NSScanner... but this may be replaced by a flex/yacc-generated parser soon.
      </p>
      <p>
        Notable features of OSBlock:
        <a href="CurryingSchonfinkelling.html">CurryingSchonfinkelling</a> is implemented, via the -assumeArgument:atIndex: method.
        OSBlocks are created from an NSString and (if necessary) an NSDictionary(for context).
      </p>
      <p>
        Problems with OSBlock:
        No support for C control structures, and limited support for non-object datatypes.(the latter is fixable fairly easily)
        Impossible to call C functions except, possibly, by means of function pointers(but I don't even know immediately how to do that, either...).
      </p>
      <p>
        OSBlock works acceptably for my purposes, even though the parsing can be slow. But blocks can be created in advance and then curried as necessary, so that problem fades.
        OSBlocks, due to their nature as purely objects, and without a syntactical addition, are inconvenient to create.
      </p>
      <p>
        The preprocessor in ObjCBrowser will take blocks within @{...} and create an instance, in place, of another Block implementation that uses function pointers internally. For this endeavour, I'll have to look into work done by DavidStes and <a href="BradCox.html">BradCox</a>...
      </p>
      <p>
        If anyone wants to see parse trees and the like here... tough. The objects are ugly and I don't feel comfortable letting the world see what a slob I am. (: The sources are available with OSFoundation, but don't judge my general coding style based on what's in there - it was a month or two ago, I was younger, more naive. ^_^
      </p>
      <p>
        As an aside, ObjCBrowser may eventually gain <a href="RefactoringBrowser.html">RefactoringBrowser</a> features(but don't go putting it into the list of <a href="RefactoringBrowser.html">RefactoringBrowser</a>s yet. ^_^) and will have a Smalltalk-style Workspace.
      </p>
      <p>
        For more info on any of these projects, e-mail me at being@mac.com.
      </p>
      <p>
        -- <a href="JoeOsborn.html">JoeOsborn</a>
      </p>
      <ul>
        <li>
           <strong></strong>MyBlocks<strong></strong>
        </li>
      </ul>
      <p>
        Well, the lack of decent Block-Support in ObjC has pestered me for quite some time now - so I have gone ahead and implemented them - finally. My Blocks do not use any parsing at all, instead, they use the GCC to do all the heavy lifting. :)
      </p>
      <p>
        <em>Oooh! Do tell how it works and what it looks like. Sample code would be good. Is there a web page for it somewhere? -- </em><a href="IanOsgood.html">IanOsgood</a><em></em>
      </p>
      <p>
        You can find a preview of the implementation at <a href="http://dwt.de.vu/">http://dwt.de.vu/</a> and you use them like this:
      </p>
      <code>
        id aBlock = BLOCK(id, id each, return [each doSomethingThatReturnsAnID]);<br/>
        id result = [aBlock value:someObject];<br/>
      </code>
      <p>
        Of course there are shortcuts like <em></em>UnaryBlock<em>, </em>BinaryBlock<em> or a </em>TestBlock<em> - you can call arbitrary c-functions, use any control structures or just use it as a closure.</em>
      </p>
      <p>
        AFAIK this is closer to <a href="SmallTalk.html">SmallTalk</a> Blocks than anything I have found in any other implementation but I'm still not content, as I don't know how to make it work with arbitrary primitive data-types as arguments or return-type (I can only do id-arguments and id or BOOL return values right now). If you have any ideas on that - then those would be most welcome as is of course any other feedback at <em>spamfaenger (at) gmx.de</em> -- MartinHaecker
      </p>
      <hr/>
      <p>
        Anyone reading this should look into "clang"'s support for blocks... (see <a href="CeeLanguageFamilyFrontEnd.html">CeeLanguageFamilyFrontEnd</a>)
      </p>
      <p>
        -- skb
      </p>
      <hr/>
      <p>
        YaKnow, this is <a href="ObjectiveCee.html">ObjectiveCee</a>.  It should really have an "@" sign somewhere. :)
      </p>
      <code>
        [aCollection forEach: @(id it) {<br/>
        print([it asString]);<br/>
        }];<br/>
      </code>
      <hr/>
      <p>
        See also <a href="BlocksInManyLanguages.html">BlocksInManyLanguages</a>
      </p>
      <hr/>
      <p>
        <a href="CategoryCee.html">CategoryCee</a>
      </p>
    </div>
  </body>
</html>