<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Promotion Traits
      </h1>
      <p>
        <a href="PromotionTraits.html">PromotionTraits</a> is a technique which enables the return type of a function to be determined by the function arguments. This is described in <a href="CppTemplatesTheCompleteGuide.html">CppTemplatesTheCompleteGuide</a>, where working code is given.  -- <a href="JohnFletcher.html">JohnFletcher</a>
      </p>
      <hr/>
      <p>
        <strong>Example of function definition</strong>
      </p>
      <code>
        template <typename T1, typename T2><br/>
        typename Promotion<T1, T2>::ResultT operator+ ( T1 const &, T2 const &);<br/>
      </code>
      <hr/>
      <p>
        A word of warning. Use of this can have side effects. I have had a problem where code to do with standard vectors would not work correctly and this turned out to be due to picking up an incorrect operator+.  If <strong>V</strong> is a vector then <strong>V[n]</strong> is implemented for <a href="GnuCpp.html">GnuCpp</a> using <strong>*(V.begin()+n)</strong> which involves addition to the iterator. -- <a href="JohnFletcher.html">JohnFletcher</a>
      </p>
      <p>
        Does it touch such issues as subclasses of a common super-class (and finding most-derived common superclass)?  That gets to be pretty damn difficult, though doable if you design specializations that indicate all superclasses of a class.
      </p>
      <hr/>
      <p>
        Related to <a href="OperatorOverloading.html">OperatorOverloading</a>
      </p>
      <hr/>
      <p>
        <strong>April 2012</strong> Now that <a href="CeePlusPlusEleven.html">CeePlusPlusEleven</a> is available I am planning to phase out use of this as soon as possible in favour of <strong>auto</strong> and <strong>decltype</strong> which can do a better job as there is no need to set up macros for the cases needed.  The only case I cannot solve so far is one involving <a href="VariadicTemplates.html">VariadicTemplates</a>.  -- <a href="JohnFletcher.html">JohnFletcher</a>
      </p>
      <hr/>
      <p>
        (For those interested, an example of the above using C++11:)
      </p>
      <code>
        template <class T1, class T2><br/>
        auto operator+(const T1& l, const T2& r) -> decltype(l + r);<br/>
      </code>
      <hr/>
      <p>
        <a href="CategoryCppTemplates.html">CategoryCppTemplates</a> <a href="CategoryCpp.html">CategoryCpp</a>
      </p>
    </div>
  </body>
</html>