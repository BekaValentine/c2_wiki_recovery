<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Sequence Number
      </h1>
      <p>
        With a communications medium that is not 100% reliable, requests and responses can be lost.  Communications protocols that require reliability must support a RetryMechanism whereby a client can re-attempt a transaction for which it did not receive a response.
      </p>
      <p>
        For operations that are not idempotent, it is important to ensure that the operation is performed exactly once.  If the server receives a request and performs the operation, but the client does not receive the response, then the client may retry the request.  The server must not perform the operation again, but must return a suitable response.
      </p>
      <p>
        <strong>Therefore,</strong>
      </p>
      <p>
        Attach a <a href="SequenceNumber.html">SequenceNumber</a> to each request.  If the server receives a request from a client with a sequence number it has already processed, then it can simply re-send the previous response, or send a response that means "this request has been processed".
      </p>
      <p>
        Sequence numbers also provide a way to match up responses with requests if a client can have multiple transactions in progress simultaneously.
      </p>
      <p>
        <strong>But,</strong>
      </p>
      <p>
        Beware of initialization, overflow, and boundary conditions with sequence numbers.
      </p>
      <hr/>
      <p>
        <em>Someone at work was telling me that this is an </em><a href="AntiPattern.html">AntiPattern</a>, but couldn't explain what was wrong with it or what a better solution is.  Can anyone around here provide some criticism?<em></em>
      </p>
      <p>
        Maybe they wanted all protocols to be stateless or idempotent, which is a good goal,
        but is often not possible. So it is not an <a href="AntiPattern.html">AntiPattern</a>, but you need to try
        not to need it. I have made some very big mistakes this by not following this
        advice.
      </p>
      <hr/>
      <p>
        See also <a href="ChangeNumber.html">ChangeNumber</a>
      </p>
    </div>
  </body>
</html>