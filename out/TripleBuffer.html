<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Triple Buffer
      </h1>
      <p>
        <a href="DoubleBuffer.html">DoubleBuffer</a><strong>'ing is commonly used in graphics programming to produce flicker-free animation. While one buffer of pixel data is visible, the program builds the next frame of animation in an off-screen buffer. The on-screen and off-screen buffers are then flipped, so that the new frame is displayed. The buffer that was on screen is now used to build the next frame.</strong>
      </p>
      <p>
        However, <a href="DoubleBuffer.html">DoubleBuffer</a><strong>'ing is useful in any system in which one process generates data to be consumed by another concurrent process.</strong>
      </p>
      <p>
        <strong>Using a </strong><a href="DoubleBuffer.html">DoubleBuffer</a> can fail when data is generated during lengthy buffer flips.<strong></strong>
      </p>
      <p>
        If the flip takes long enough, there can be a time when there is no valid buffer to write to.
      </p>
      <p>
        Therefore:
      </p>
      <p>
        <strong>Use three buffers to pass data between concurrent processes.</strong>
      </p>
      <p>
        Very similar to a <a href="DoubleBuffer.html">DoubleBuffer</a>, a <a href="TripleBuffer.html">TripleBuffer</a> uses three buffers to manage the data pipeline. With <a href="TripleBuffer.html">TripleBuffer</a><strong>'ing, there will always be a buffer to write to while a transition is in progress between the other two.</strong>
      </p>
      <p>
        In graphics programming, the buffer system is sometimes generalized into a FlipChain. For instance, you require four buffers to correctly manage the rendering pipeline if you must use timed transitions between buffers like a wipe or an alpha transition.  
      </p>
      <p>
        <em>A </em>FlipChain is essentially a <a href="CircularBuffer.html">CircularBuffer</a> of buffers.<em></em>
      </p>
      <hr/>
      <p>
        I wrote a <a href="TripleBuffer.html">TripleBuffer</a> like the above to process magnetic tapes in the middle 1960s. Input into buffer0, process buffer1, output from buffer2, cycle the three pointers around and repeat...
      </p>
      <p>
        Another use for multiple buffers is to allow a simple read-ahead or look-ahead mechanism to implement a kind of <a href="TimeMachine.html">TimeMachine</a> that can see the future.
      </p>
      <hr/>
      <p>
        <a href="TripleBuffer.html">TripleBuffer</a> also applies to graphic displays with a complex computationally expensive background (a raster or 3d rendered terrain) with lighter-weight more frequently updated graphics on top.
      </p>
      <hr/>
      <p>
        In Quake I, triple buffering was used to allow the rendering engine to render at 100% CPU regardless of CPU speed. One buffer would be the buffer currently being displayed. A second buffer would be a buffer that had already been rendered and was ready to display at any time. A third buffer would be the buffer currently in the process of being rendered.
      </p>
      <p>
        If the CPU was very fast, the third buffer might be completed before the second buffer was ever used, so the second and third buffers would simply be swapped and the CPU would go ahead and render another frame.
      </p>
      <p>
        Whenever it was time for the monitor to do a vertical refresh, the program would check whether a second buffer was available. If so, the first and second buffers would be swapped.
      </p>
      <p>
        So, triple-buffering can be used to drop or duplicate frames when converting from one video refresh rate to another.
      </p>
      <hr/>
      <p>
        Also see <a href="GraphicsPatterns.html">GraphicsPatterns</a>, <a href="DoubleBuffer.html">DoubleBuffer</a>, <a href="CircularBuffer.html">CircularBuffer</a>.
      </p>
      <p>
        <a href="CategoryGraphicsPattern.html">CategoryGraphicsPattern</a> <a href="CategoryPattern.html">CategoryPattern</a>
      </p>
    </div>
  </body>
</html>