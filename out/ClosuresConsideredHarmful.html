<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Closures Considered Harmful
      </h1>
      <p>
        In the journey of <a href="ComputerScience.html">ComputerScience</a> a fork was made in the path.  One path went upwards to abstraction, one path went downwards towards "the machine".  The former developed closures, LISP, and <a href="GodClass.html">GodClass</a>es (see the <a href="PythonLanguage.html">PythonLanguage</a>) which have created such excellent creations as Javascript and such, but has turned into a dead end, an <a href="AntiPattern.html">AntiPattern</a>.
      </p>
      <ul>
        <li>
           Correction, lexical closures are fine.  The problem is only with "magical" closures with Java code run without the local, client <a href="VirtualMachine.html">VirtualMachine</a>.
        </li>
      </ul>
      <ul>
        <li>
           <em>What do you mean by "'magical' closures"?  What do you mean by "running Java without the local, client </em><a href="VirtualMachine.html">VirtualMachine</a>"?  Do you mean GCJ?<em></em>
        </li>
      </ul>
      <p>
        <em>Dead end?  Really?  How so?</em>
      </p>
      <p>
        One must now follow the <a href="OneTruePath.html">OneTruePath</a>. 
      </p>
      <p>
        <em>What makes you think that is the one "true" path, as opposed to many others?</em>
      </p>
      <p>
        See also: <a href="ConfusedComputerScience.html">ConfusedComputerScience</a>.
      </p>
      <p>
        <em>The confusion, it seems, is not with </em><a href="ComputerScience.html">ComputerScience</a>.  Time to look within, Glasshoppa.<em></em>
      </p>
      <p>
        "It <em>seems</em>", he said, substituting a slippery predicate for an actual statement....  I have looked within and to the end of your world.  YOU, sir, have not understood.
      </p>
      <p>
        <em>Then I invite you to show how closures are harmful.  Be sure to clearly define what you mean by "closure" and "harmful".  Illustrate, if possible, with code.</em>
      </p>
      <p>
        There are no such "invitations" -- where I do the work for you.  <em>I</em> have challenged <em>you</em>.  <strong>Except for functions</strong>, closures are an <a href="AntiPattern.html">AntiPattern</a>.
      </p>
      <ul>
        <li>
           <em>Why do you think they are an </em><a href="AntiPattern.html">AntiPattern</a>?<em></em>
        </li>
      </ul>
      <p>
        <em>To prove that closures are not harmful?  The very fact that they exist, are being added to programming languages and are generally regarded as a </em><a href="GoodThing.html">GoodThing</a> amongst developers, is evidence that they are at least not <em>universally</em> considered harmful.  So far, yours is the unsubstantiated and rather strong claim.  Strong claims require strong evidence.  Rather than engage in <a href="ShiftingTheBurdenOfProof.html">ShiftingTheBurdenOfProof</a>, can you present us with a thesis that demonstrates how closures are harmful?  If not, we'll have to assume this page is nowt but spurious pot-stirring, with no evidential basis.<em></em>
      </p>
      <p>
        Show me how you implement a "closure" at the machine-level, in assembly, or in standard C without extensions. 
      </p>
      <p>
        <em>Really?</em>
      </p>
      <p>
        Yes.
      </p>
      <p>
        {A closure simply captures local variables.  Trivial, that.}
      </p>
      <p>
        It's not that trivial, when one has to maintain references to memory locations.
      </p>
      <p>
        [It's no worse than anything else you put on the heap.]
      </p>
      <ul>
        <li>
          You don't know what you're talking about.
        </li>
      </ul>
      <ul>
        <li>
           <em>Actually, he does.</em>
        </li>
      </ul>
      <p>
        <em>Indeed.  See, for example, </em><a href="http://www.hokstad.com/how-to-implement-closures''">http://www.hokstad.com/how-to-implement-closures''</a>
      </p>
      <p>
        Thanks for that article.  It shows how convoluted one has to get.  He's dropping into assembly from C and pushing things onto a stack.  I happen to know that it won't be stable, but will review that information....
      </p>
      <ul>
        <li>
           <em>Why do you think it won't be stable?</em>
        </li>
      </ul>
      <p>
        [The assembly and the convolutions are optimizations. They aren't necessary to implement the closures. All you need are the first three code snippets after "Indirection Hell" and the code snippet after "Fat Pointers".]
      </p>
      <p>
        <em>Having implemented closures in the </em><a href="RelProject.html">RelProject</a>, my experience is that they're straightforward to implement -- not particularly complex or difficult -- and they add to the expressiveness of the language.  Whilst not currently exposed in the <a href="RelProject.html">RelProject</a>'s <a href="TutorialDee.html">TutorialDee</a> implementation, closures are internally used extensively.  Without them, the implementation would have been considerably more complex and difficult.  So, for minimal implementation effort, a significant gain.  I can't consider that "harmful".<em></em>
      </p>
      <hr/>
      <p>
        Closures are harmful where garbage collection is unacceptable. See KernelMode, <a href="HardRealTime.html">HardRealTime</a>, or any time OutOfMemory must be handled gracefully.
      </p>
      <p>
        <em>Well, yes.  But then it's not typical to find closures implemented in languages designed for such (generally) low-level contexts.</em>
      </p>
      <hr/>
      <p>
        See also <a href="ObjectOrientedRefactored.html">ObjectOrientedRefactored</a>, <a href="MarkJanssen.html">MarkJanssen</a>, <a href="OneTruePath.html">OneTruePath</a>
      </p>
    </div>
  </body>
</html>