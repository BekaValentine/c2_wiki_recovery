<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <base href="/mount/ultralaser_home/Projects/c2_wiki_recovery/out/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="page">
      <h1>
        <img src="wiki.gif" />
        Off By One
      </h1>
      <p>
        Of all the ways in which a number can be wrong, being off by one is the most common. Usually, the cause is some subtle logic error, a miscounting. Gross errors tend to get noticed and fixed more quickly. Off by ones are certainly common enough to deserve special attention during testing.
      </p>
      <p>
        I've found the best way to counter them is formal reasoning, especially loop invariants and induction proofs. Suppose you need some function of N, which you expect to be a simple arithmetic progression. Think what the answer is when N=0. Think again when N=1. Often, that's enough for you to get the code right. (It's worth trying N=100, or some such extreme value, as a check.)
      </p>
      <p>
        See also: <a href="FencePostError.html">FencePostError</a> and <a href="SourcesOfBugs.html">SourcesOfBugs</a>
        -- <a href="DaveHarris.html">DaveHarris</a>
      </p>
      <hr/>
      <p>
        <strong>Graphical Programming</strong>
      </p>
      <p>
        This problem also occurs in graphical programming while specifying coordinates. For example, when you draw a line you have two alternatives:
      </p>
      <ol>
        <li>
           drawLine(left, top, right, bottom)
        </li>
        <li>
           drawLine(left, top, width, height)
        </li>
      </ol>
      <p>
        what's the width of this line? In the first case, it's right-left+1.
        Where does this line end? In the second case, it's left+width-1.
      </p>
      <p>
        Of course, it'll be much more complicated in complex situations.
      </p>
      <p>
        -- <a href="SavasAlparslan.html">SavasAlparslan</a>
      </p>
      <hr/>
      <p>
        <strong>Avoiding </strong><a href="OffByOne.html">OffByOne</a> Errors by Using Collections<strong></strong>
      </p>
      <p>
        Most of my <a href="OffByOne.html">OffByOne</a> errors seem to have disappeared. I suspect it's because most iterations are done to process collections of things, and in languages supporting iterators directly over collections, you always get the right number of iterations. I rarely write a loop over a set of integers ... and when counting things it's easy to remember to init to zero. -- <a href="RonJeffries.html">RonJeffries</a>
      </p>
      <p>
        My <a href="OffByOne.html">OffByOne</a> errors vanished in 1984-85 when I encountered the book <a href="TheScienceOfProgramming.html">TheScienceOfProgramming</a> by Gries (the compiler textbook author). He had taken Dijkstra's (<a href="EwDijkstra.html">EwDijkstra</a>) program derivation to its next level and showed how to <em>derive</em> programs (see <a href="BinarySearch.html">BinarySearch</a> for an example). I tried his ideas, and found it was quicker to derive my code than to debug it, and all the <a href="OffByOne.html">OffByOne</a> errors went away. All I was left with were "didn't read the manual errors" (of which there were many).
      </p>
      <p>
        When I switched from C to Smalltalk, they didn't come back, although I stopped deriving. The reason seems to be what <a href="RonJeffries.html">RonJeffries</a> said - most of the <a href="OffByOne.html">OffByOne</a> situations are absent given the Collection classes and iterators. Many of the reasons for using <a href="TheScienceOfProgramming.html">TheScienceOfProgramming</a> have gone away, I reserve it for converting recursion to iteration (and avoiding <a href="OffByOne.html">OffByOne</a> errors there). -- <a href="AlistairCockburn.html">AlistairCockburn</a>
      </p>
      <p>
        And before collections, array languages (APL), which apply functions and operators to data with little regard to the size, shape, or dimensions of the arguments, make it difficult to trip over <a href="OffByOne.html">OffByOne</a> problems. But it does make it obvious how much time programming scalar languages is wasted by creating, setting up, and testing loops. -- <a href="JimRussell.html">JimRussell</a>
      </p>
      <hr/>
      <p>
        I always use <strong>for</strong> loops with the following structure:
      </p>
      <p>
        for (i=0; i<count; i++) ...
      </p>
      <p>
        Since all <strong>for</strong> loops are the same, <a href="OffByOne.html">OffByOne</a> errors don't occur and the coding is quick and easy.
      </p>
      <p>
        For cases that don't involve looping, such as string manipulation, I try a small value and convince myself that the result is correct. -- <a href="JaredLevy.html">JaredLevy</a>
      </p>
      <p>
        More on this on <a href="FencePostError.html">FencePostError</a> (maybe that content should be moved back here).
      </p>
      <hr/>
      <p>
        I always try to picture the way I would do the task manually, then base the loop on that.
        This also helps dealing with border effects like initializing the loop, and detecting when it's reached its end.
        -- MichaelH
      </p>
      <hr/>
      <p>
        Not to be confused with: <a href="OffByOneWebBrowser.html">OffByOneWebBrowser</a>
      </p>
      <hr/>
      <p>
        <a href="CategoryBug.html">CategoryBug</a>
      </p>
    </div>
  </body>
</html>